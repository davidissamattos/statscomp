<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Relative improvement | Statistical Models for Benchmark Comparison</title>
  <meta name="description" content="Chapter 3 Relative improvement | Statistical Models for Benchmark Comparison" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Relative improvement | Statistical Models for Benchmark Comparison" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Relative improvement | Statistical Models for Benchmark Comparison" />
  
  
  

<meta name="author" content="David Issa Mattos" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="probability-of-success-model.html"/>
<link rel="next" href="ranking.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pre-requisites"><i class="fa fa-check"></i>Pre-requisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#source-code"><i class="fa fa-check"></i>Source code</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#compiling-this-document"><i class="fa fa-check"></i>Compiling this document</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-environment"><i class="fa fa-check"></i>Software environment</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#the-simulation"><i class="fa fa-check"></i><b>1.1</b> The simulation</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#exploring-the-dataset"><i class="fa fa-check"></i><b>1.1.1</b> Exploring the dataset</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#column-definitions"><i class="fa fa-check"></i><b>1.1.2</b> Column definitions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html"><i class="fa fa-check"></i><b>2</b> Probability of success model</a><ul>
<li class="chapter" data-level="2.1" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#data-preparation"><i class="fa fa-check"></i><b>2.1</b> Data preparation</a></li>
<li class="chapter" data-level="2.2" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#stan-model"><i class="fa fa-check"></i><b>2.2</b> Stan model</a></li>
<li class="chapter" data-level="2.3" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#diagnosis"><i class="fa fa-check"></i><b>2.3</b> Diagnosis</a></li>
<li class="chapter" data-level="2.4" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#results-and-plots"><i class="fa fa-check"></i><b>2.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="relative-improvement.html"><a href="relative-improvement.html"><i class="fa fa-check"></i><b>3</b> Relative improvement</a><ul>
<li class="chapter" data-level="3.1" data-path="relative-improvement.html"><a href="relative-improvement.html#data-preparation-1"><i class="fa fa-check"></i><b>3.1</b> Data preparation</a></li>
<li class="chapter" data-level="3.2" data-path="relative-improvement.html"><a href="relative-improvement.html#stan-model-1"><i class="fa fa-check"></i><b>3.2</b> Stan model</a></li>
<li class="chapter" data-level="3.3" data-path="relative-improvement.html"><a href="relative-improvement.html#diagnosis-1"><i class="fa fa-check"></i><b>3.3</b> Diagnosis</a></li>
<li class="chapter" data-level="3.4" data-path="relative-improvement.html"><a href="relative-improvement.html#results-and-plots-1"><i class="fa fa-check"></i><b>3.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ranking.html"><a href="ranking.html"><i class="fa fa-check"></i><b>4</b> Ranking</a><ul>
<li class="chapter" data-level="4.1" data-path="ranking.html"><a href="ranking.html#data-preparation-2"><i class="fa fa-check"></i><b>4.1</b> Data preparation</a></li>
<li class="chapter" data-level="4.2" data-path="ranking.html"><a href="ranking.html#stan-model-2"><i class="fa fa-check"></i><b>4.2</b> Stan model</a></li>
<li class="chapter" data-level="4.3" data-path="ranking.html"><a href="ranking.html#diagnosis-2"><i class="fa fa-check"></i><b>4.3</b> Diagnosis</a></li>
<li class="chapter" data-level="4.4" data-path="ranking.html"><a href="ranking.html#results-and-plots-2"><i class="fa fa-check"></i><b>4.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="time-to-complete.html"><a href="time-to-complete.html"><i class="fa fa-check"></i><b>5</b> Time to complete</a><ul>
<li class="chapter" data-level="5.1" data-path="time-to-complete.html"><a href="time-to-complete.html#data-preparation-3"><i class="fa fa-check"></i><b>5.1</b> Data preparation</a></li>
<li class="chapter" data-level="5.2" data-path="time-to-complete.html"><a href="time-to-complete.html#stan-model-3"><i class="fa fa-check"></i><b>5.2</b> Stan model</a></li>
<li class="chapter" data-level="5.3" data-path="time-to-complete.html"><a href="time-to-complete.html#diagnosis-3"><i class="fa fa-check"></i><b>5.3</b> Diagnosis</a></li>
<li class="chapter" data-level="5.4" data-path="time-to-complete.html"><a href="time-to-complete.html#results-and-plots-3"><i class="fa fa-check"></i><b>5.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html"><i class="fa fa-check"></i><b>6</b> Multiple-group comparison</a><ul>
<li class="chapter" data-level="6.1" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#data-preparation-4"><i class="fa fa-check"></i><b>6.1</b> Data preparation</a></li>
<li class="chapter" data-level="6.2" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#stan-model-4"><i class="fa fa-check"></i><b>6.2</b> Stan model</a></li>
<li class="chapter" data-level="6.3" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#diagnosis-4"><i class="fa fa-check"></i><b>6.3</b> Diagnosis</a></li>
<li class="chapter" data-level="6.4" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#results-and-plots-4"><i class="fa fa-check"></i><b>6.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sensitivity-analysis-and-model-comparison.html"><a href="sensitivity-analysis-and-model-comparison.html"><i class="fa fa-check"></i><b>7</b> Sensitivity analysis and model comparison</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistical Models for Benchmark Comparison</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="relative-improvement" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Relative improvement</h1>
<p>Our next, model deals with relative improvement of the algorithms over a baseline in noiseless functions. This model is based on a normal linear regression.</p>
<p><strong>RQ</strong> What is the expected improvement of these algorithms against the Random Search in noiseless benchmark functions? For this question we will consider the Euclidean distance to the location of the closest global minima, instead of the final reward difference.</p>
<div id="data-preparation-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Data preparation</h2>
<p>We start importing the dataset</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="relative-improvement.html#cb23-1"></a>dataset &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;./data/statscomp.csv&quot;</span>)</span></code></pre></div>
<p>Let’s select only the columns that interests us, in this case the Euclidean distance</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="relative-improvement.html#cb24-1"></a>d &lt;-<span class="st"> </span>dataset <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(Algorithm, CostFunction, SD, <span class="dt">Budget =</span> MaxFevalPerDimensions, </span>
<span id="cb24-2"><a href="relative-improvement.html#cb24-2"></a>    simNumber, EuclideanDistance, OptimizationSuccessful) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(OptimizationSuccessful <span class="op">&amp;</span><span class="st"> </span></span>
<span id="cb24-3"><a href="relative-improvement.html#cb24-3"></a><span class="st">    </span>SD <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>SD, <span class="op">-</span>OptimizationSuccessful)</span></code></pre></div>
<p>Let’s first make this a wide data set based on the algorithm to make it easier to compute the relative improvement over the Random Search. We are also dropping the RandomSearch2 since there is no noise in the benchmark functions</p>
<p>There are several ways that can be used to compute a relative improvement (and they will affect the result). The way we are using is to compare against the mean of distance of the 10 samples of the Random Search in each cost function for a specific budget. The way we are comparing is we divide the distance of each algorithm by the average distance of the random search. If this ratio is greater than 1 then random search is better, if smaller than 1 then the algorithm is better</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="relative-improvement.html#cb25-1"></a>relativeImprovement &lt;-<span class="st"> </span><span class="cf">function</span>(x, rs) {</span>
<span id="cb25-2"><a href="relative-improvement.html#cb25-2"></a>    <span class="co"># x is the column rs is the random search column</span></span>
<span id="cb25-3"><a href="relative-improvement.html#cb25-3"></a>    ri &lt;-<span class="st"> </span>(rs <span class="op">-</span><span class="st"> </span>x)<span class="op">/</span>rs</span>
<span id="cb25-4"><a href="relative-improvement.html#cb25-4"></a>    ri &lt;-<span class="st"> </span><span class="kw">ifelse</span>(ri <span class="op">&lt;</span><span class="st"> </span><span class="dv">-1</span>, <span class="dv">-1</span>, ri)</span>
<span id="cb25-5"><a href="relative-improvement.html#cb25-5"></a>    ri &lt;-<span class="st"> </span><span class="kw">ifelse</span>(ri <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, ri)</span>
<span id="cb25-6"><a href="relative-improvement.html#cb25-6"></a>    <span class="kw">return</span>(ri)</span>
<span id="cb25-7"><a href="relative-improvement.html#cb25-7"></a>}</span>
<span id="cb25-8"><a href="relative-improvement.html#cb25-8"></a></span>
<span id="cb25-9"><a href="relative-improvement.html#cb25-9"></a>d_wide &lt;-<span class="st"> </span>d <span class="op">%&gt;%</span><span class="st"> </span>tidyr<span class="op">::</span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> Algorithm, <span class="dt">values_from =</span> EuclideanDistance) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-10"><a href="relative-improvement.html#cb25-10"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>RandomSearch2) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(CostFunction, Budget) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">avgRandomSearch =</span> <span class="kw">mean</span>(RandomSearch1)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-11"><a href="relative-improvement.html#cb25-11"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">mutate_at</span>(<span class="kw">c</span>(<span class="st">&quot;NelderMead&quot;</span>, <span class="st">&quot;PSO&quot;</span>, <span class="st">&quot;SimulatedAnnealing&quot;</span>, <span class="st">&quot;CuckooSearch&quot;</span>, </span>
<span id="cb25-12"><a href="relative-improvement.html#cb25-12"></a>    <span class="st">&quot;DifferentialEvolution&quot;</span>, <span class="st">&quot;CMAES&quot;</span>), <span class="op">~</span><span class="kw">relativeImprovement</span>(.x, <span class="dt">rs =</span> avgRandomSearch))</span></code></pre></div>
<p>After we compute our metric we drop the Random Search column and we pivot_longer again to make the inference</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="relative-improvement.html#cb26-1"></a>d_final &lt;-<span class="st"> </span>d_wide <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>RandomSearch1, <span class="op">-</span>avgRandomSearch) <span class="op">%&gt;%</span><span class="st"> </span>tidyr<span class="op">::</span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">c</span>(<span class="st">&quot;NelderMead&quot;</span>, </span>
<span id="cb26-2"><a href="relative-improvement.html#cb26-2"></a>    <span class="st">&quot;PSO&quot;</span>, <span class="st">&quot;SimulatedAnnealing&quot;</span>, <span class="st">&quot;CuckooSearch&quot;</span>, <span class="st">&quot;DifferentialEvolution&quot;</span>, <span class="st">&quot;CMAES&quot;</span>), <span class="dt">names_to =</span> <span class="st">&quot;Algorithm&quot;</span>, </span>
<span id="cb26-3"><a href="relative-improvement.html#cb26-3"></a>    <span class="dt">values_to =</span> <span class="st">&quot;y&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>simNumber) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">AlgorithmID =</span> <span class="kw">create_index</span>(Algorithm), </span>
<span id="cb26-4"><a href="relative-improvement.html#cb26-4"></a>    <span class="dt">CostFunctionID =</span> <span class="kw">create_index</span>(CostFunction)) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(Algorithm, AlgorithmID, CostFunction, </span>
<span id="cb26-5"><a href="relative-improvement.html#cb26-5"></a>    CostFunctionID, Budget, y)</span>
<span id="cb26-6"><a href="relative-improvement.html#cb26-6"></a></span>
<span id="cb26-7"><a href="relative-improvement.html#cb26-7"></a><span class="co"># checking if there is any na -&gt; stan does not accept that</span></span>
<span id="cb26-8"><a href="relative-improvement.html#cb26-8"></a>find.na &lt;-<span class="st"> </span>d_final <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(<span class="kw">is.na</span>(y))</span>
<span id="cb26-9"><a href="relative-improvement.html#cb26-9"></a></span>
<span id="cb26-10"><a href="relative-improvement.html#cb26-10"></a>bm &lt;-<span class="st"> </span><span class="kw">get_index_names_as_array</span>(d_final<span class="op">$</span>CostFunction)</span>
<span id="cb26-11"><a href="relative-improvement.html#cb26-11"></a>algorithms &lt;-<span class="st"> </span><span class="kw">get_index_names_as_array</span>(d_final<span class="op">$</span>Algorithm)</span></code></pre></div>
<p>Now we have our final dataset to use with Stan. Lets preview a sample of the data set</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="relative-improvement.html#cb27-1"></a><span class="kw">kable</span>(dplyr<span class="op">::</span><span class="kw">sample_n</span>(d_final, <span class="dt">size =</span> <span class="dv">10</span>), <span class="st">&quot;html&quot;</span>, <span class="dt">booktabs =</span> T, <span class="dt">format.args =</span> <span class="kw">list</span>(<span class="dt">scientific =</span> <span class="ot">FALSE</span>), </span>
<span id="cb27-2"><a href="relative-improvement.html#cb27-2"></a>    <span class="dt">digits =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span>))</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Algorithm
</th>
<th style="text-align:right;">
AlgorithmID
</th>
<th style="text-align:left;">
CostFunction
</th>
<th style="text-align:right;">
CostFunctionID
</th>
<th style="text-align:right;">
Budget
</th>
<th style="text-align:right;">
y
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
ChenV
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
-1.000
</td>
</tr>
<tr>
<td style="text-align:left;">
CuckooSearch
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
LunacekBiRastriginN6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
-0.161
</td>
</tr>
<tr>
<td style="text-align:left;">
CMAES
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Damavandi
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-0.111
</td>
</tr>
<tr>
<td style="text-align:left;">
PSO
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Schwefel2d26N6
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
10000
</td>
<td style="text-align:right;">
-0.538
</td>
</tr>
<tr>
<td style="text-align:left;">
DifferentialEvolution
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
RosenbrockRotatedN6
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
10000
</td>
<td style="text-align:right;">
1.000
</td>
</tr>
<tr>
<td style="text-align:left;">
CMAES
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
XinSheYang2N2
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0.988
</td>
</tr>
<tr>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
XinSheYang2N2
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
-1.000
</td>
</tr>
<tr>
<td style="text-align:left;">
CMAES
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Trefethen
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
1000
</td>
<td style="text-align:right;">
-1.000
</td>
</tr>
<tr>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Schwefel2d4N6
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
-1.000
</td>
</tr>
<tr>
<td style="text-align:left;">
CuckooSearch
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
QingN2
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1000
</td>
<td style="text-align:right;">
-1.000
</td>
</tr>
</tbody>
</table>
</div>
<div id="stan-model-1" class="section level2">
<h2><span class="header-section-number">3.2</span> Stan model</h2>
<p>The Stan model is specified in the file: <code>'./stanmodels/relativeimprovement.stan'</code></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="relative-improvement.html#cb28-1"></a><span class="kw">print_stan_code</span>(<span class="st">&quot;./stanmodels/relativeimprovement.stan&quot;</span>)</span></code></pre></div>
<pre><code>// Relative improvement model
// Author: David Issa Mattos
// Date: 17 June 2020
//
//

data {
 int &lt;lower=1&gt; N_total; // Sample size
 real y[N_total]; // relative improvement variable

 //To model each algorithm independently
 int &lt;lower=1&gt; N_algorithm; // Number of algorithms
 int algorithm_id[N_total]; //vector that has the id of each algorithm
 
 //To model the influence of each benchmark
 int &lt;lower=1&gt; N_bm;
 int bm_id[N_total];
}

parameters {
  real &lt;lower=0&gt; sigma;//std for the normal
  
  //Fixed effect
  real a_alg[N_algorithm];//the mean effect given by the algorithms

  // //Random effect. The effect of the benchmarks
  real a_bm_norm[N_bm];//the mean effect given by the base class type
  real&lt;lower=0&gt; s;//std for the random effects
  
}

model {
  real mu[N_total];

  sigma ~ exponential(1);
  
  //Fixed effect
  a_alg ~ normal(0,1);
  
  // //Random effects
  s ~ exponential(1);
  a_bm_norm ~ normal(0,5);

  for (i in 1:N_total)
  {
    
     mu[i] = a_alg[algorithm_id[i]] + a_bm_norm[bm_id[i]]*s;
  }
  
  y ~ normal(mu, sigma);
}</code></pre>
<p>Let’s compile and start sampling with the Stan function. In the data folder you can find the specific data used to fit the model after all transformations <code>"./data/relativeimprovement-data.RDS"</code></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="relative-improvement.html#cb30-1"></a>standata &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">N_total =</span> <span class="kw">nrow</span>(d_final), <span class="dt">y =</span> d_final<span class="op">$</span>y, <span class="dt">N_algorithm =</span> <span class="kw">length</span>(algorithms), <span class="dt">algorithm_id =</span> d_final<span class="op">$</span>AlgorithmID, </span>
<span id="cb30-2"><a href="relative-improvement.html#cb30-2"></a>    <span class="dt">N_bm =</span> <span class="kw">length</span>(bm), <span class="dt">bm_id =</span> d_final<span class="op">$</span>CostFunctionID)</span>
<span id="cb30-3"><a href="relative-improvement.html#cb30-3"></a><span class="kw">saveRDS</span>(standata, <span class="dt">file =</span> <span class="st">&quot;./data/relativeimprovement-data.RDS&quot;</span>)</span></code></pre></div>
<p>For computation time sake we are not running this chunk every time we compile this document. From now on we will load from the saved Stan fit object. However, when we change our model or the data we can just run this chunk separately</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="relative-improvement.html#cb31-1"></a>standata &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;./data/relativeimprovement-data.RDS&quot;</span>)</span>
<span id="cb31-2"><a href="relative-improvement.html#cb31-2"></a>relativeimprovement.fit &lt;-<span class="st"> </span><span class="kw">stan</span>(<span class="dt">file =</span> <span class="st">&quot;./stanmodels/relativeimprovement.stan&quot;</span>, <span class="dt">data =</span> standata, </span>
<span id="cb31-3"><a href="relative-improvement.html#cb31-3"></a>    <span class="dt">chains =</span> <span class="dv">4</span>, <span class="dt">warmup =</span> <span class="dv">200</span>, <span class="dt">iter =</span> <span class="dv">2000</span>)</span>
<span id="cb31-4"><a href="relative-improvement.html#cb31-4"></a><span class="kw">saveRDS</span>(relativeimprovement.fit, <span class="dt">file =</span> <span class="st">&quot;./data/relativeimprovement-fit.RDS&quot;</span>)</span></code></pre></div>
</div>
<div id="diagnosis-1" class="section level2">
<h2><span class="header-section-number">3.3</span> Diagnosis</h2>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="relative-improvement.html#cb32-1"></a>a_alg &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a_alg[1]&quot;</span>, <span class="st">&quot;a_alg[2]&quot;</span>, <span class="st">&quot;a_alg[3]&quot;</span>, <span class="st">&quot;a_alg[4]&quot;</span>, <span class="st">&quot;a_alg[5]&quot;</span>, <span class="st">&quot;a_alg[6]&quot;</span>)</span>
<span id="cb32-2"><a href="relative-improvement.html#cb32-2"></a>rstan<span class="op">::</span><span class="kw">traceplot</span>(relativeimprovement.fit, <span class="dt">pars =</span> a_alg)</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-31-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="relative-improvement.html#cb33-1"></a>rstan<span class="op">::</span><span class="kw">traceplot</span>(relativeimprovement.fit, <span class="dt">pars =</span> <span class="kw">c</span>(<span class="st">&quot;s&quot;</span>, <span class="st">&quot;sigma&quot;</span>))</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-31-2.png" width="672" style="display: block; margin: auto;" /></p>
<p>Another diagnosis is to look at the Rhat. If Rhat is greater than 1.05 it indicates a divergence in the chains (they did not mix well). The table below shows a summary of the sampling.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="relative-improvement.html#cb34-1"></a><span class="kw">kable</span>(<span class="kw">summary</span>(relativeimprovement.fit)<span class="op">$</span>summary) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;striped&quot;</span>, </span>
<span id="cb34-2"><a href="relative-improvement.html#cb34-2"></a>    <span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span>))</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
se_mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
2.5%
</th>
<th style="text-align:right;">
25%
</th>
<th style="text-align:right;">
50%
</th>
<th style="text-align:right;">
75%
</th>
<th style="text-align:right;">
97.5%
</th>
<th style="text-align:right;">
n_eff
</th>
<th style="text-align:right;">
Rhat
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sigma
</td>
<td style="text-align:right;">
0.6366992
</td>
<td style="text-align:right;">
0.0000454
</td>
<td style="text-align:right;">
0.0047854
</td>
<td style="text-align:right;">
0.6272973
</td>
<td style="text-align:right;">
0.6335023
</td>
<td style="text-align:right;">
0.6367213
</td>
<td style="text-align:right;">
0.6398886
</td>
<td style="text-align:right;">
0.6460897
</td>
<td style="text-align:right;">
11123.2858
</td>
<td style="text-align:right;">
0.999663
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[1]
</td>
<td style="text-align:right;">
0.1517965
</td>
<td style="text-align:right;">
0.0011766
</td>
<td style="text-align:right;">
0.0310153
</td>
<td style="text-align:right;">
0.0890402
</td>
<td style="text-align:right;">
0.1315669
</td>
<td style="text-align:right;">
0.1515736
</td>
<td style="text-align:right;">
0.1720076
</td>
<td style="text-align:right;">
0.2131436
</td>
<td style="text-align:right;">
694.8023
</td>
<td style="text-align:right;">
1.010485
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[2]
</td>
<td style="text-align:right;">
-0.3765757
</td>
<td style="text-align:right;">
0.0012145
</td>
<td style="text-align:right;">
0.0308803
</td>
<td style="text-align:right;">
-0.4362484
</td>
<td style="text-align:right;">
-0.3974145
</td>
<td style="text-align:right;">
-0.3765244
</td>
<td style="text-align:right;">
-0.3560475
</td>
<td style="text-align:right;">
-0.3157079
</td>
<td style="text-align:right;">
646.4589
</td>
<td style="text-align:right;">
1.012039
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[3]
</td>
<td style="text-align:right;">
0.3032118
</td>
<td style="text-align:right;">
0.0011403
</td>
<td style="text-align:right;">
0.0311283
</td>
<td style="text-align:right;">
0.2418509
</td>
<td style="text-align:right;">
0.2830412
</td>
<td style="text-align:right;">
0.3030670
</td>
<td style="text-align:right;">
0.3234544
</td>
<td style="text-align:right;">
0.3656765
</td>
<td style="text-align:right;">
745.2010
</td>
<td style="text-align:right;">
1.011560
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[4]
</td>
<td style="text-align:right;">
-0.6398181
</td>
<td style="text-align:right;">
0.0011550
</td>
<td style="text-align:right;">
0.0309328
</td>
<td style="text-align:right;">
-0.7010332
</td>
<td style="text-align:right;">
-0.6602053
</td>
<td style="text-align:right;">
-0.6395958
</td>
<td style="text-align:right;">
-0.6197929
</td>
<td style="text-align:right;">
-0.5785804
</td>
<td style="text-align:right;">
717.2631
</td>
<td style="text-align:right;">
1.010893
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[5]
</td>
<td style="text-align:right;">
0.3212411
</td>
<td style="text-align:right;">
0.0011688
</td>
<td style="text-align:right;">
0.0310915
</td>
<td style="text-align:right;">
0.2604697
</td>
<td style="text-align:right;">
0.3007525
</td>
<td style="text-align:right;">
0.3213155
</td>
<td style="text-align:right;">
0.3417438
</td>
<td style="text-align:right;">
0.3816100
</td>
<td style="text-align:right;">
707.6620
</td>
<td style="text-align:right;">
1.011001
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[6]
</td>
<td style="text-align:right;">
-0.5693807
</td>
<td style="text-align:right;">
0.0011457
</td>
<td style="text-align:right;">
0.0309980
</td>
<td style="text-align:right;">
-0.6312980
</td>
<td style="text-align:right;">
-0.5898352
</td>
<td style="text-align:right;">
-0.5695445
</td>
<td style="text-align:right;">
-0.5495347
</td>
<td style="text-align:right;">
-0.5063644
</td>
<td style="text-align:right;">
731.9811
</td>
<td style="text-align:right;">
1.010142
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[1]
</td>
<td style="text-align:right;">
-2.7137114
</td>
<td style="text-align:right;">
0.0416885
</td>
<td style="text-align:right;">
1.5665895
</td>
<td style="text-align:right;">
-5.8224324
</td>
<td style="text-align:right;">
-3.7327766
</td>
<td style="text-align:right;">
-2.6736342
</td>
<td style="text-align:right;">
-1.6686107
</td>
<td style="text-align:right;">
0.2776190
</td>
<td style="text-align:right;">
1412.1390
</td>
<td style="text-align:right;">
1.004527
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[2]
</td>
<td style="text-align:right;">
-10.8958837
</td>
<td style="text-align:right;">
0.0554098
</td>
<td style="text-align:right;">
2.0632999
</td>
<td style="text-align:right;">
-15.1207865
</td>
<td style="text-align:right;">
-12.2444144
</td>
<td style="text-align:right;">
-10.8215307
</td>
<td style="text-align:right;">
-9.4621775
</td>
<td style="text-align:right;">
-7.0769171
</td>
<td style="text-align:right;">
1386.6027
</td>
<td style="text-align:right;">
1.003124
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[3]
</td>
<td style="text-align:right;">
4.2583819
</td>
<td style="text-align:right;">
0.0385214
</td>
<td style="text-align:right;">
1.6332886
</td>
<td style="text-align:right;">
1.1117384
</td>
<td style="text-align:right;">
3.1391281
</td>
<td style="text-align:right;">
4.2362438
</td>
<td style="text-align:right;">
5.3542234
</td>
<td style="text-align:right;">
7.5718072
</td>
<td style="text-align:right;">
1797.7158
</td>
<td style="text-align:right;">
1.004829
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[4]
</td>
<td style="text-align:right;">
0.7112590
</td>
<td style="text-align:right;">
0.0428340
</td>
<td style="text-align:right;">
1.5408722
</td>
<td style="text-align:right;">
-2.3646658
</td>
<td style="text-align:right;">
-0.3207764
</td>
<td style="text-align:right;">
0.7193666
</td>
<td style="text-align:right;">
1.7256372
</td>
<td style="text-align:right;">
3.7018440
</td>
<td style="text-align:right;">
1294.0657
</td>
<td style="text-align:right;">
1.005084
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[5]
</td>
<td style="text-align:right;">
-5.7656983
</td>
<td style="text-align:right;">
0.0431004
</td>
<td style="text-align:right;">
1.7041312
</td>
<td style="text-align:right;">
-9.2596729
</td>
<td style="text-align:right;">
-6.8551277
</td>
<td style="text-align:right;">
-5.7106639
</td>
<td style="text-align:right;">
-4.5908359
</td>
<td style="text-align:right;">
-2.5530455
</td>
<td style="text-align:right;">
1563.3011
</td>
<td style="text-align:right;">
1.002572
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[6]
</td>
<td style="text-align:right;">
4.2496820
</td>
<td style="text-align:right;">
0.0414842
</td>
<td style="text-align:right;">
1.6438047
</td>
<td style="text-align:right;">
1.1100909
</td>
<td style="text-align:right;">
3.1394173
</td>
<td style="text-align:right;">
4.1933720
</td>
<td style="text-align:right;">
5.3276540
</td>
<td style="text-align:right;">
7.5493153
</td>
<td style="text-align:right;">
1570.1272
</td>
<td style="text-align:right;">
1.007179
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[7]
</td>
<td style="text-align:right;">
-0.2674616
</td>
<td style="text-align:right;">
0.0369455
</td>
<td style="text-align:right;">
1.5162217
</td>
<td style="text-align:right;">
-3.3010115
</td>
<td style="text-align:right;">
-1.2763273
</td>
<td style="text-align:right;">
-0.2536588
</td>
<td style="text-align:right;">
0.7311207
</td>
<td style="text-align:right;">
2.6874394
</td>
<td style="text-align:right;">
1684.2293
</td>
<td style="text-align:right;">
1.005261
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[8]
</td>
<td style="text-align:right;">
5.6344824
</td>
<td style="text-align:right;">
0.0401936
</td>
<td style="text-align:right;">
1.7039969
</td>
<td style="text-align:right;">
2.4599223
</td>
<td style="text-align:right;">
4.4498948
</td>
<td style="text-align:right;">
5.5829061
</td>
<td style="text-align:right;">
6.7546531
</td>
<td style="text-align:right;">
9.1313990
</td>
<td style="text-align:right;">
1797.3156
</td>
<td style="text-align:right;">
1.003865
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[9]
</td>
<td style="text-align:right;">
2.3486823
</td>
<td style="text-align:right;">
0.0365820
</td>
<td style="text-align:right;">
1.5733714
</td>
<td style="text-align:right;">
-0.6677979
</td>
<td style="text-align:right;">
1.2810815
</td>
<td style="text-align:right;">
2.3172149
</td>
<td style="text-align:right;">
3.3908362
</td>
<td style="text-align:right;">
5.4734946
</td>
<td style="text-align:right;">
1849.8131
</td>
<td style="text-align:right;">
1.005487
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[10]
</td>
<td style="text-align:right;">
1.6087046
</td>
<td style="text-align:right;">
0.0378888
</td>
<td style="text-align:right;">
1.5388783
</td>
<td style="text-align:right;">
-1.4414791
</td>
<td style="text-align:right;">
0.5689259
</td>
<td style="text-align:right;">
1.5979130
</td>
<td style="text-align:right;">
2.6324298
</td>
<td style="text-align:right;">
4.6692221
</td>
<td style="text-align:right;">
1649.6313
</td>
<td style="text-align:right;">
1.005010
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[11]
</td>
<td style="text-align:right;">
4.3359572
</td>
<td style="text-align:right;">
0.0400394
</td>
<td style="text-align:right;">
1.6234754
</td>
<td style="text-align:right;">
1.2474252
</td>
<td style="text-align:right;">
3.2273711
</td>
<td style="text-align:right;">
4.3025935
</td>
<td style="text-align:right;">
5.4012772
</td>
<td style="text-align:right;">
7.5917445
</td>
<td style="text-align:right;">
1644.0567
</td>
<td style="text-align:right;">
1.004376
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[12]
</td>
<td style="text-align:right;">
3.3231669
</td>
<td style="text-align:right;">
0.0380437
</td>
<td style="text-align:right;">
1.5581674
</td>
<td style="text-align:right;">
0.3842329
</td>
<td style="text-align:right;">
2.2473012
</td>
<td style="text-align:right;">
3.2775423
</td>
<td style="text-align:right;">
4.3421298
</td>
<td style="text-align:right;">
6.5170015
</td>
<td style="text-align:right;">
1677.4984
</td>
<td style="text-align:right;">
1.004492
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[13]
</td>
<td style="text-align:right;">
-8.7863772
</td>
<td style="text-align:right;">
0.0495466
</td>
<td style="text-align:right;">
1.8703483
</td>
<td style="text-align:right;">
-12.5734195
</td>
<td style="text-align:right;">
-10.0168608
</td>
<td style="text-align:right;">
-8.7316873
</td>
<td style="text-align:right;">
-7.4936928
</td>
<td style="text-align:right;">
-5.3044054
</td>
<td style="text-align:right;">
1425.0092
</td>
<td style="text-align:right;">
1.002819
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[14]
</td>
<td style="text-align:right;">
4.3965769
</td>
<td style="text-align:right;">
0.0398836
</td>
<td style="text-align:right;">
1.6356215
</td>
<td style="text-align:right;">
1.2509473
</td>
<td style="text-align:right;">
3.2929197
</td>
<td style="text-align:right;">
4.3874897
</td>
<td style="text-align:right;">
5.4634265
</td>
<td style="text-align:right;">
7.6869788
</td>
<td style="text-align:right;">
1681.8130
</td>
<td style="text-align:right;">
1.005157
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[15]
</td>
<td style="text-align:right;">
-5.4213624
</td>
<td style="text-align:right;">
0.0424027
</td>
<td style="text-align:right;">
1.6621547
</td>
<td style="text-align:right;">
-8.7825665
</td>
<td style="text-align:right;">
-6.5371309
</td>
<td style="text-align:right;">
-5.3809169
</td>
<td style="text-align:right;">
-4.2789899
</td>
<td style="text-align:right;">
-2.2428167
</td>
<td style="text-align:right;">
1536.5824
</td>
<td style="text-align:right;">
1.003424
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[16]
</td>
<td style="text-align:right;">
0.5037543
</td>
<td style="text-align:right;">
0.0349947
</td>
<td style="text-align:right;">
1.5393684
</td>
<td style="text-align:right;">
-2.4795947
</td>
<td style="text-align:right;">
-0.5253227
</td>
<td style="text-align:right;">
0.4943375
</td>
<td style="text-align:right;">
1.5307805
</td>
<td style="text-align:right;">
3.5780664
</td>
<td style="text-align:right;">
1934.9966
</td>
<td style="text-align:right;">
1.002675
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[17]
</td>
<td style="text-align:right;">
4.0776233
</td>
<td style="text-align:right;">
0.0418592
</td>
<td style="text-align:right;">
1.5962764
</td>
<td style="text-align:right;">
1.0589818
</td>
<td style="text-align:right;">
2.9720643
</td>
<td style="text-align:right;">
4.0549310
</td>
<td style="text-align:right;">
5.1239776
</td>
<td style="text-align:right;">
7.2967120
</td>
<td style="text-align:right;">
1454.2348
</td>
<td style="text-align:right;">
1.005255
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[18]
</td>
<td style="text-align:right;">
3.8001474
</td>
<td style="text-align:right;">
0.0386611
</td>
<td style="text-align:right;">
1.6026555
</td>
<td style="text-align:right;">
0.8170766
</td>
<td style="text-align:right;">
2.6999973
</td>
<td style="text-align:right;">
3.7310589
</td>
<td style="text-align:right;">
4.8383907
</td>
<td style="text-align:right;">
7.1187954
</td>
<td style="text-align:right;">
1718.4334
</td>
<td style="text-align:right;">
1.004670
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[19]
</td>
<td style="text-align:right;">
-2.8913038
</td>
<td style="text-align:right;">
0.0423698
</td>
<td style="text-align:right;">
1.5655264
</td>
<td style="text-align:right;">
-6.0602853
</td>
<td style="text-align:right;">
-3.9014872
</td>
<td style="text-align:right;">
-2.8552779
</td>
<td style="text-align:right;">
-1.8200818
</td>
<td style="text-align:right;">
0.0302975
</td>
<td style="text-align:right;">
1365.2387
</td>
<td style="text-align:right;">
1.005471
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[20]
</td>
<td style="text-align:right;">
0.3825050
</td>
<td style="text-align:right;">
0.0410052
</td>
<td style="text-align:right;">
1.5538486
</td>
<td style="text-align:right;">
-2.7183712
</td>
<td style="text-align:right;">
-0.6445357
</td>
<td style="text-align:right;">
0.3959057
</td>
<td style="text-align:right;">
1.3944785
</td>
<td style="text-align:right;">
3.3949192
</td>
<td style="text-align:right;">
1435.9492
</td>
<td style="text-align:right;">
1.004422
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[21]
</td>
<td style="text-align:right;">
-2.8360559
</td>
<td style="text-align:right;">
0.0390764
</td>
<td style="text-align:right;">
1.5588204
</td>
<td style="text-align:right;">
-5.9845535
</td>
<td style="text-align:right;">
-3.8691546
</td>
<td style="text-align:right;">
-2.8033550
</td>
<td style="text-align:right;">
-1.8002926
</td>
<td style="text-align:right;">
0.1867086
</td>
<td style="text-align:right;">
1591.3372
</td>
<td style="text-align:right;">
1.004338
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[22]
</td>
<td style="text-align:right;">
5.8450623
</td>
<td style="text-align:right;">
0.0407720
</td>
<td style="text-align:right;">
1.6957078
</td>
<td style="text-align:right;">
2.7541864
</td>
<td style="text-align:right;">
4.6792436
</td>
<td style="text-align:right;">
5.7936697
</td>
<td style="text-align:right;">
6.9324970
</td>
<td style="text-align:right;">
9.3939160
</td>
<td style="text-align:right;">
1729.7326
</td>
<td style="text-align:right;">
1.003963
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[23]
</td>
<td style="text-align:right;">
-6.3745110
</td>
<td style="text-align:right;">
0.0440180
</td>
<td style="text-align:right;">
1.7247972
</td>
<td style="text-align:right;">
-9.9118463
</td>
<td style="text-align:right;">
-7.5101071
</td>
<td style="text-align:right;">
-6.3209794
</td>
<td style="text-align:right;">
-5.1551930
</td>
<td style="text-align:right;">
-3.1383556
</td>
<td style="text-align:right;">
1535.3812
</td>
<td style="text-align:right;">
1.002384
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[24]
</td>
<td style="text-align:right;">
1.2950268
</td>
<td style="text-align:right;">
0.0362686
</td>
<td style="text-align:right;">
1.5578214
</td>
<td style="text-align:right;">
-1.7352214
</td>
<td style="text-align:right;">
0.2458700
</td>
<td style="text-align:right;">
1.2606755
</td>
<td style="text-align:right;">
2.3310578
</td>
<td style="text-align:right;">
4.4108179
</td>
<td style="text-align:right;">
1844.9033
</td>
<td style="text-align:right;">
1.003614
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[25]
</td>
<td style="text-align:right;">
-3.7348643
</td>
<td style="text-align:right;">
0.0432295
</td>
<td style="text-align:right;">
1.5722999
</td>
<td style="text-align:right;">
-6.9112210
</td>
<td style="text-align:right;">
-4.7862040
</td>
<td style="text-align:right;">
-3.6838769
</td>
<td style="text-align:right;">
-2.6456579
</td>
<td style="text-align:right;">
-0.7579575
</td>
<td style="text-align:right;">
1322.8509
</td>
<td style="text-align:right;">
1.004567
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[26]
</td>
<td style="text-align:right;">
6.9776767
</td>
<td style="text-align:right;">
0.0435961
</td>
<td style="text-align:right;">
1.7674427
</td>
<td style="text-align:right;">
3.6526650
</td>
<td style="text-align:right;">
5.7696341
</td>
<td style="text-align:right;">
6.9033355
</td>
<td style="text-align:right;">
8.1201421
</td>
<td style="text-align:right;">
10.5466427
</td>
<td style="text-align:right;">
1643.5993
</td>
<td style="text-align:right;">
1.005146
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[27]
</td>
<td style="text-align:right;">
-5.4455812
</td>
<td style="text-align:right;">
0.0432887
</td>
<td style="text-align:right;">
1.6583715
</td>
<td style="text-align:right;">
-8.8491366
</td>
<td style="text-align:right;">
-6.5232091
</td>
<td style="text-align:right;">
-5.3929347
</td>
<td style="text-align:right;">
-4.3027325
</td>
<td style="text-align:right;">
-2.4056948
</td>
<td style="text-align:right;">
1467.6252
</td>
<td style="text-align:right;">
1.003268
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[28]
</td>
<td style="text-align:right;">
-1.9200252
</td>
<td style="text-align:right;">
0.0377029
</td>
<td style="text-align:right;">
1.5490553
</td>
<td style="text-align:right;">
-5.0022050
</td>
<td style="text-align:right;">
-2.9627591
</td>
<td style="text-align:right;">
-1.9010092
</td>
<td style="text-align:right;">
-0.8716976
</td>
<td style="text-align:right;">
1.0580959
</td>
<td style="text-align:right;">
1688.0430
</td>
<td style="text-align:right;">
1.003941
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[29]
</td>
<td style="text-align:right;">
-2.6777911
</td>
<td style="text-align:right;">
0.0378873
</td>
<td style="text-align:right;">
1.5667798
</td>
<td style="text-align:right;">
-5.8967952
</td>
<td style="text-align:right;">
-3.7023463
</td>
<td style="text-align:right;">
-2.6256191
</td>
<td style="text-align:right;">
-1.6100436
</td>
<td style="text-align:right;">
0.2458392
</td>
<td style="text-align:right;">
1710.1283
</td>
<td style="text-align:right;">
1.003846
</td>
</tr>
<tr>
<td style="text-align:left;">
a_bm_norm[30]
</td>
<td style="text-align:right;">
5.4409271
</td>
<td style="text-align:right;">
0.0402352
</td>
<td style="text-align:right;">
1.6923063
</td>
<td style="text-align:right;">
2.2384787
</td>
<td style="text-align:right;">
4.2960018
</td>
<td style="text-align:right;">
5.3998164
</td>
<td style="text-align:right;">
6.5270230
</td>
<td style="text-align:right;">
8.8830024
</td>
<td style="text-align:right;">
1769.0738
</td>
<td style="text-align:right;">
1.005596
</td>
</tr>
<tr>
<td style="text-align:left;">
s
</td>
<td style="text-align:right;">
0.0290267
</td>
<td style="text-align:right;">
0.0001202
</td>
<td style="text-align:right;">
0.0043209
</td>
<td style="text-align:right;">
0.0219523
</td>
<td style="text-align:right;">
0.0260244
</td>
<td style="text-align:right;">
0.0285486
</td>
<td style="text-align:right;">
0.0315318
</td>
<td style="text-align:right;">
0.0388776
</td>
<td style="text-align:right;">
1292.9627
</td>
<td style="text-align:right;">
1.002235
</td>
</tr>
<tr>
<td style="text-align:left;">
lp__
</td>
<td style="text-align:right;">
-455.7124747
</td>
<td style="text-align:right;">
0.1573456
</td>
<td style="text-align:right;">
5.8454274
</td>
<td style="text-align:right;">
-468.2114406
</td>
<td style="text-align:right;">
-459.4107452
</td>
<td style="text-align:right;">
-455.4265434
</td>
<td style="text-align:right;">
-451.6435633
</td>
<td style="text-align:right;">
-445.2134104
</td>
<td style="text-align:right;">
1380.1405
</td>
<td style="text-align:right;">
1.001604
</td>
</tr>
</tbody>
</table>
</div>
<div id="results-and-plots-1" class="section level2">
<h2><span class="header-section-number">3.4</span> Results and Plots</h2>
<p>First lets get the HPDI of every parameter.</p>
<p>Then we restrict to the algorithms, them to the slopes, then to the</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="relative-improvement.html#cb35-1"></a>hpdi &lt;-<span class="st"> </span><span class="kw">get_HPDI_from_stanfit</span>(relativeimprovement.fit)</span>
<span id="cb35-2"><a href="relative-improvement.html#cb35-2"></a></span>
<span id="cb35-3"><a href="relative-improvement.html#cb35-3"></a>hpdi_algorithm &lt;-<span class="st"> </span>hpdi <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(<span class="kw">str_detect</span>(Parameter, <span class="st">&quot;a_alg</span><span class="ch">\\</span><span class="st">[&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">Parameter =</span> algorithms)  <span class="co">#Changing to the algorithms labels</span></span>
<span id="cb35-4"><a href="relative-improvement.html#cb35-4"></a></span>
<span id="cb35-5"><a href="relative-improvement.html#cb35-5"></a>hpdi_other_parameters &lt;-<span class="st"> </span>hpdi <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(Parameter <span class="op">==</span><span class="st"> &quot;s&quot;</span> <span class="op">|</span><span class="st"> </span>Parameter <span class="op">==</span><span class="st"> &quot;sigma&quot;</span>)</span>
<span id="cb35-6"><a href="relative-improvement.html#cb35-6"></a></span>
<span id="cb35-7"><a href="relative-improvement.html#cb35-7"></a></span>
<span id="cb35-8"><a href="relative-improvement.html#cb35-8"></a>p_alg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> hpdi_algorithm, <span class="kw">aes</span>(<span class="dt">x =</span> Parameter)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_pointrange</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> HPDI.lower, </span>
<span id="cb35-9"><a href="relative-improvement.html#cb35-9"></a>    <span class="dt">ymax =</span> HPDI.higher, <span class="dt">y =</span> Mean)) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Estimate&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Algorithm&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>()</span>
<span id="cb35-10"><a href="relative-improvement.html#cb35-10"></a>p_alg <span class="op">+</span><span class="st"> </span><span class="kw">plot_annotation</span>(<span class="dt">title =</span> <span class="st">&quot;HPDI interval for the algorithms&quot;</span>)</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-33-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="relative-improvement.html#cb36-1"></a>p_others &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> hpdi_other_parameters, <span class="kw">aes</span>(<span class="dt">x =</span> Parameter)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_pointrange</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> HPDI.lower, </span>
<span id="cb36-2"><a href="relative-improvement.html#cb36-2"></a>    <span class="dt">ymax =</span> HPDI.higher, <span class="dt">y =</span> Mean)) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Estimate&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Parameter&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>()</span>
<span id="cb36-3"><a href="relative-improvement.html#cb36-3"></a>p_others <span class="op">+</span><span class="st"> </span><span class="kw">plot_annotation</span>(<span class="dt">title =</span> <span class="st">&quot;HPDI interval&quot;</span>)</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-33-2.png" width="672" style="display: block; margin: auto;" /></p>
<p>Creating an output table</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="relative-improvement.html#cb37-1"></a>rename_pars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">paste</span>(<span class="kw">rep</span>(<span class="st">&quot;a_&quot;</span>, <span class="kw">length</span>(algorithms)), algorithms, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>), <span class="st">&quot;s&quot;</span>, <span class="st">&quot;sigma&quot;</span>)</span>
<span id="cb37-2"><a href="relative-improvement.html#cb37-2"></a>t &lt;-<span class="st"> </span><span class="kw">create_table_model</span>(relativeimprovement.fit, <span class="kw">c</span>(a_alg, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;sigma&quot;</span>), rename_pars)</span>
<span id="cb37-3"><a href="relative-improvement.html#cb37-3"></a><span class="kw">saveRDS</span>(t, <span class="st">&quot;./statscomp-paper/tables/datafortables/relativeimprovement-par-table.RDS&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="probability-of-success-model.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ranking.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
