<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Ranking | Online Appendix for: Statistical Models for the Analysis of Optimization Algorithms with Benchmark Functions</title>
  <meta name="description" content="Chapter 4 Ranking | Online Appendix for: Statistical Models for the Analysis of Optimization Algorithms with Benchmark Functions" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Ranking | Online Appendix for: Statistical Models for the Analysis of Optimization Algorithms with Benchmark Functions" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Ranking | Online Appendix for: Statistical Models for the Analysis of Optimization Algorithms with Benchmark Functions" />
  
  
  

<meta name="author" content="David Issa Mattos, Jan Bosch, Helena Holmström Olsson" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="relative-improvement.html"/>
<link rel="next" href="time-to-complete.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pre-requisites"><i class="fa fa-check"></i>Pre-requisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#source-code"><i class="fa fa-check"></i>Source code</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#compiling-this-document"><i class="fa fa-check"></i>Compiling this document</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-environment"><i class="fa fa-check"></i>Software environment</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.0.1" data-path="introduction.html"><a href="introduction.html#exploring-the-dataset"><i class="fa fa-check"></i><b>1.0.1</b> Exploring the dataset</a></li>
<li class="chapter" data-level="1.0.2" data-path="introduction.html"><a href="introduction.html#column-definitions-of-the-dataset"><i class="fa fa-check"></i><b>1.0.2</b> Column definitions of the dataset</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html"><i class="fa fa-check"></i><b>2</b> Probability of success model</a><ul>
<li class="chapter" data-level="2.1" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#data-preparation"><i class="fa fa-check"></i><b>2.1</b> Data preparation</a></li>
<li class="chapter" data-level="2.2" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#stan-model"><i class="fa fa-check"></i><b>2.2</b> Stan model</a></li>
<li class="chapter" data-level="2.3" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#diagnosis"><i class="fa fa-check"></i><b>2.3</b> Diagnosis</a><ul>
<li class="chapter" data-level="2.3.1" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#chains-convergence"><i class="fa fa-check"></i><b>2.3.1</b> Chains convergence</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#results-and-plots"><i class="fa fa-check"></i><b>2.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="relative-improvement.html"><a href="relative-improvement.html"><i class="fa fa-check"></i><b>3</b> Relative improvement</a><ul>
<li class="chapter" data-level="3.1" data-path="relative-improvement.html"><a href="relative-improvement.html#data-preparation-1"><i class="fa fa-check"></i><b>3.1</b> Data preparation</a></li>
<li class="chapter" data-level="3.2" data-path="relative-improvement.html"><a href="relative-improvement.html#stan-model-1"><i class="fa fa-check"></i><b>3.2</b> Stan model</a></li>
<li class="chapter" data-level="3.3" data-path="relative-improvement.html"><a href="relative-improvement.html#diagnosis-1"><i class="fa fa-check"></i><b>3.3</b> Diagnosis</a></li>
<li class="chapter" data-level="3.4" data-path="relative-improvement.html"><a href="relative-improvement.html#results-and-plots-1"><i class="fa fa-check"></i><b>3.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ranking.html"><a href="ranking.html"><i class="fa fa-check"></i><b>4</b> Ranking</a><ul>
<li class="chapter" data-level="4.1" data-path="ranking.html"><a href="ranking.html#data-preparation-2"><i class="fa fa-check"></i><b>4.1</b> Data preparation</a></li>
<li class="chapter" data-level="4.2" data-path="ranking.html"><a href="ranking.html#stan-model-2"><i class="fa fa-check"></i><b>4.2</b> Stan model</a></li>
<li class="chapter" data-level="4.3" data-path="ranking.html"><a href="ranking.html#diagnosis-2"><i class="fa fa-check"></i><b>4.3</b> Diagnosis</a></li>
<li class="chapter" data-level="4.4" data-path="ranking.html"><a href="ranking.html#results-and-plots-2"><i class="fa fa-check"></i><b>4.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="time-to-complete.html"><a href="time-to-complete.html"><i class="fa fa-check"></i><b>5</b> Time to complete</a><ul>
<li class="chapter" data-level="5.1" data-path="time-to-complete.html"><a href="time-to-complete.html#data-preparation-3"><i class="fa fa-check"></i><b>5.1</b> Data preparation</a></li>
<li class="chapter" data-level="5.2" data-path="time-to-complete.html"><a href="time-to-complete.html#stan-model-3"><i class="fa fa-check"></i><b>5.2</b> Stan model</a></li>
<li class="chapter" data-level="5.3" data-path="time-to-complete.html"><a href="time-to-complete.html#diagnosis-3"><i class="fa fa-check"></i><b>5.3</b> Diagnosis</a></li>
<li class="chapter" data-level="5.4" data-path="time-to-complete.html"><a href="time-to-complete.html#results-and-plots-3"><i class="fa fa-check"></i><b>5.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html"><i class="fa fa-check"></i><b>6</b> Multiple-group comparison</a><ul>
<li class="chapter" data-level="6.1" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#data-preparation-4"><i class="fa fa-check"></i><b>6.1</b> Data preparation</a></li>
<li class="chapter" data-level="6.2" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#stan-model-4"><i class="fa fa-check"></i><b>6.2</b> Stan model</a></li>
<li class="chapter" data-level="6.3" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#diagnosis-4"><i class="fa fa-check"></i><b>6.3</b> Diagnosis</a></li>
<li class="chapter" data-level="6.4" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#results-and-plots-4"><i class="fa fa-check"></i><b>6.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sensitivity-analysis-model-comparison-and-posterior-predictive.html"><a href="sensitivity-analysis-model-comparison-and-posterior-predictive.html"><i class="fa fa-check"></i><b>7</b> Sensitivity analysis, model comparison and posterior predictive</a><ul>
<li class="chapter" data-level="7.1" data-path="sensitivity-analysis-model-comparison-and-posterior-predictive.html"><a href="sensitivity-analysis-model-comparison-and-posterior-predictive.html#compare-models-with-and-without-clustering"><i class="fa fa-check"></i><b>7.1</b> Compare models with and without clustering</a></li>
<li class="chapter" data-level="7.2" data-path="sensitivity-analysis-model-comparison-and-posterior-predictive.html"><a href="sensitivity-analysis-model-comparison-and-posterior-predictive.html#sensitivity-analysis-of-priors"><i class="fa fa-check"></i><b>7.2</b> Sensitivity analysis of priors</a></li>
<li class="chapter" data-level="7.3" data-path="sensitivity-analysis-model-comparison-and-posterior-predictive.html"><a href="sensitivity-analysis-model-comparison-and-posterior-predictive.html#posterior-predictive-plots"><i class="fa fa-check"></i><b>7.3</b> Posterior predictive plots</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Online Appendix for: Statistical Models for the Analysis of Optimization Algorithms with Benchmark Functions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ranking" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Ranking</h1>
<p>In this section, we will consider the Bradley-Terry Model for ranking algorithms in the fixed budget of 10,000 function evaluations per dimension and controlling for noise and the effect of benchmark functions</p>
<ul>
<li><strong>RQ3:</strong> How can we rank algorithm different optimization algorithms given a budget of 10,000 evaluations per dimension in noisy benchmarks?</li>
</ul>
<div id="data-preparation-2" class="section level2">
<h2><span class="header-section-number">4.1</span> Data preparation</h2>
<p>We start importing the dataset</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="ranking.html#cb39-1"></a>dataset &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&#39;./data/statscomp.csv&#39;</span>)</span></code></pre></div>
<p>The BT model formulation that we use has a specific data format, where we have one column with algo_0 (with index of each algorithm) another column with algo_1 and a third column with who won (algo 0 or algo 1),</p>
<p>First lets select only the data that we are interested and create ranking by the each run in each group (by the simNumber).
To avoid ties (dealing with those on next session) we will rank ties randomly</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="ranking.html#cb40-1"></a>d1 &lt;-<span class="st"> </span>dataset <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb40-2"><a href="ranking.html#cb40-2"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Algorithm, CostFunction, SD, <span class="dt">Budget=</span>MaxFevalPerDimensions, simNumber, TrueRewardDifference, OptimizationSuccessful) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb40-3"><a href="ranking.html#cb40-3"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(OptimizationSuccessful <span class="op">&amp;</span><span class="st"> </span>Budget<span class="op">==</span><span class="dv">10000</span> <span class="op">&amp;</span><span class="st"> </span>SD<span class="op">==</span><span class="fl">3.0</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb40-4"><a href="ranking.html#cb40-4"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>Budget, <span class="op">-</span>OptimizationSuccessful, <span class="op">-</span>SD) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb40-5"><a href="ranking.html#cb40-5"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(CostFunction, simNumber) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb40-6"><a href="ranking.html#cb40-6"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">rankReward=</span><span class="kw">rank</span>(TrueRewardDifference, <span class="dt">ties.method =</span> <span class="st">&#39;random&#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb40-7"><a href="ranking.html#cb40-7"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb40-8"><a href="ranking.html#cb40-8"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>TrueRewardDifference)</span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="ranking.html#cb41-1"></a><span class="kw">kable</span>(dplyr<span class="op">::</span><span class="kw">sample_n</span>(d1,<span class="dt">size=</span><span class="dv">10</span>), <span class="dt">booktabs=</span>T, <span class="dt">format.args =</span> <span class="kw">list</span>(<span class="dt">scientific =</span> <span class="ot">FALSE</span>), <span class="dt">digits =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb41-2"><a href="ranking.html#cb41-2"></a><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span>))</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Algorithm
</th>
<th style="text-align:left;">
CostFunction
</th>
<th style="text-align:right;">
simNumber
</th>
<th style="text-align:right;">
rankReward
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
PSO
</td>
<td style="text-align:left;">
ChungReynoldsN2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:left;">
RosenbrockRotatedN6
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
PSO
</td>
<td style="text-align:left;">
LunacekBiRastriginN6
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:left;">
ThreeHumpCamelBack
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
CuckooSearch
</td>
<td style="text-align:left;">
ChenBird
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch2
</td>
<td style="text-align:left;">
QingN2
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
CMAES
</td>
<td style="text-align:left;">
Shubert
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch2
</td>
<td style="text-align:left;">
BentCigarN6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch1
</td>
<td style="text-align:left;">
Schwefel2d26N6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
CuckooSearch
</td>
<td style="text-align:left;">
QingN2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<p>Now to compare the ranks we need to pivot wider the data frame and based on that we will expand to the dataset in the appropriated format</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="ranking.html#cb42-1"></a>d1_wide &lt;-<span class="st"> </span>d1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb42-2"><a href="ranking.html#cb42-2"></a><span class="st">  </span>tidyr<span class="op">::</span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> Algorithm,</span>
<span id="cb42-3"><a href="ranking.html#cb42-3"></a>                     <span class="dt">values_from=</span>rankReward)</span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="ranking.html#cb43-1"></a><span class="kw">kable</span>(dplyr<span class="op">::</span><span class="kw">sample_n</span>(d1_wide,<span class="dt">size=</span><span class="dv">10</span>), <span class="dt">booktabs=</span>T, <span class="dt">format.args =</span> <span class="kw">list</span>(<span class="dt">scientific =</span> <span class="ot">FALSE</span>), <span class="dt">digits =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb43-2"><a href="ranking.html#cb43-2"></a><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span>))</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
CostFunction
</th>
<th style="text-align:right;">
simNumber
</th>
<th style="text-align:right;">
NelderMead
</th>
<th style="text-align:right;">
PSO
</th>
<th style="text-align:right;">
SimulatedAnnealing
</th>
<th style="text-align:right;">
CuckooSearch
</th>
<th style="text-align:right;">
DifferentialEvolution
</th>
<th style="text-align:right;">
RandomSearch1
</th>
<th style="text-align:right;">
RandomSearch2
</th>
<th style="text-align:right;">
CMAES
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
RosenbrockRotatedN6
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
ChenV
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
ChenBird
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
ChungReynoldsN2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
ChenBird
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
ChenBird
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
Schwefel2d23N6
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Trigonometric1N6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
PinterN6
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Trigonometric1N6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
</tr>
</tbody>
</table>
<p>Now we need to modify this data set and expand it so we have the pairwise comparisons</p>
<p>First let’s get the number of algorithms and create combination of all possible 2 by 2 comparisons without repeating</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="ranking.html#cb44-1"></a>algorithms &lt;-<span class="st"> </span><span class="kw">get_index_names_as_array</span>(d1<span class="op">$</span>Algorithm)</span>
<span id="cb44-2"><a href="ranking.html#cb44-2"></a>n_algorithms &lt;-<span class="st"> </span><span class="kw">length</span>(algorithms)</span>
<span id="cb44-3"><a href="ranking.html#cb44-3"></a>comb &lt;-<span class="st"> </span>gtools<span class="op">::</span><span class="kw">combinations</span>(<span class="dt">n=</span>n_algorithms, <span class="dt">r=</span><span class="dv">2</span>, <span class="dt">v=</span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span>n_algorithms), <span class="dt">repeats.allowed =</span> F)</span></code></pre></div>
<p>The pairs combinations looks like this (for algo_0 and algo_1):</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="ranking.html#cb45-1"></a><span class="kw">kable</span>(comb, <span class="dt">booktabs=</span>T) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb45-2"><a href="ranking.html#cb45-2"></a><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span>))</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
8
</td>
</tr>
</tbody>
</table>
<p>Note that each row of d_wide will be expanded into 28 rows. Giving a dataset with a total of 8400 rows.</p>
<p>The following code can a bit slow to run due to the double for loops (there is probably a way to vectorize this and make it run faster), but for building this appendix we will not run, instead we will run it once, save this data, and load it when needed. It takes a couple of minutes but if you have a lot of data and algorithms it can easily go for hours</p>
<p>We will use a progress bar to follow the data frame creation.</p>
<p>1- We initialize a tibble data frame
2- First we loop through the wide data frame <code>d1_wide</code> row by row
3- For each row we will loop through the different combinations in the <code>comb</code> variable to create the rows of the data frame. We add each row to the initial dataframe</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="ranking.html#cb46-1"></a>pb &lt;-<span class="st"> </span>progress<span class="op">::</span>progress_bar<span class="op">$</span><span class="kw">new</span>(<span class="dt">format =</span> <span class="st">&quot;[:bar] :current/:total (:percent)&quot;</span>, <span class="dt">total =</span> <span class="kw">nrow</span>(d1_wide))</span>
<span id="cb46-2"><a href="ranking.html#cb46-2"></a></span>
<span id="cb46-3"><a href="ranking.html#cb46-3"></a>df_out &lt;-<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">tribble</span>(<span class="op">~</span>algo0_name, <span class="op">~</span>algo0, <span class="op">~</span>algo1_name, <span class="op">~</span>algo1, <span class="op">~</span>y, <span class="op">~</span>simNumber, <span class="op">~</span>CostFunction)</span>
<span id="cb46-4"><a href="ranking.html#cb46-4"></a></span>
<span id="cb46-5"><a href="ranking.html#cb46-5"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(d1_wide))</span>
<span id="cb46-6"><a href="ranking.html#cb46-6"></a>{</span>
<span id="cb46-7"><a href="ranking.html#cb46-7"></a>  current_row &lt;-<span class="st"> </span>d1_wide[i,]</span>
<span id="cb46-8"><a href="ranking.html#cb46-8"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(comb)){</span>
<span id="cb46-9"><a href="ranking.html#cb46-9"></a>    comb_row &lt;-<span class="st"> </span>comb[j,]</span>
<span id="cb46-10"><a href="ranking.html#cb46-10"></a>    </span>
<span id="cb46-11"><a href="ranking.html#cb46-11"></a>    algo0_name &lt;-<span class="st"> </span>algorithms[comb_row[<span class="dv">1</span>]]</span>
<span id="cb46-12"><a href="ranking.html#cb46-12"></a>    algo0 &lt;-<span class="st"> </span>comb_row[<span class="dv">1</span>]</span>
<span id="cb46-13"><a href="ranking.html#cb46-13"></a>    algo0_rank &lt;-<span class="st"> </span>current_row[[<span class="dv">1</span>,algo0_name]]</span>
<span id="cb46-14"><a href="ranking.html#cb46-14"></a>    </span>
<span id="cb46-15"><a href="ranking.html#cb46-15"></a>    algo1_name &lt;-<span class="st"> </span>algorithms[comb_row[<span class="dv">2</span>]]</span>
<span id="cb46-16"><a href="ranking.html#cb46-16"></a>    algo1 &lt;-<span class="st"> </span>comb_row[<span class="dv">2</span>]</span>
<span id="cb46-17"><a href="ranking.html#cb46-17"></a>    algo1_rank &lt;-<span class="st"> </span>current_row[[<span class="dv">1</span>,algo1_name]]</span>
<span id="cb46-18"><a href="ranking.html#cb46-18"></a>    </span>
<span id="cb46-19"><a href="ranking.html#cb46-19"></a>    diff_rank &lt;-<span class="st"> </span>algo1_rank <span class="op">-</span><span class="st"> </span>algo0_rank</span>
<span id="cb46-20"><a href="ranking.html#cb46-20"></a>    y &lt;-<span class="st"> </span><span class="kw">ifelse</span>(diff_rank<span class="op">&lt;</span><span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>) </span>
<span id="cb46-21"><a href="ranking.html#cb46-21"></a>    </span>
<span id="cb46-22"><a href="ranking.html#cb46-22"></a>    </span>
<span id="cb46-23"><a href="ranking.html#cb46-23"></a>    df_out &lt;-<span class="st"> </span><span class="kw">add_row</span>(df_out,</span>
<span id="cb46-24"><a href="ranking.html#cb46-24"></a>                      <span class="dt">algo0_name=</span>algo0_name,</span>
<span id="cb46-25"><a href="ranking.html#cb46-25"></a>                      <span class="dt">algo0=</span>algo0,</span>
<span id="cb46-26"><a href="ranking.html#cb46-26"></a>                      <span class="dt">algo1_name=</span>algo1_name,</span>
<span id="cb46-27"><a href="ranking.html#cb46-27"></a>                      <span class="dt">algo1=</span>algo1,</span>
<span id="cb46-28"><a href="ranking.html#cb46-28"></a>                      <span class="dt">y=</span>y,</span>
<span id="cb46-29"><a href="ranking.html#cb46-29"></a>                      <span class="dt">simNumber=</span>current_row<span class="op">$</span>simNumber,</span>
<span id="cb46-30"><a href="ranking.html#cb46-30"></a>                      <span class="dt">CostFunction=</span>current_row<span class="op">$</span>CostFunction)</span>
<span id="cb46-31"><a href="ranking.html#cb46-31"></a>    </span>
<span id="cb46-32"><a href="ranking.html#cb46-32"></a>  }</span>
<span id="cb46-33"><a href="ranking.html#cb46-33"></a>  pb<span class="op">$</span><span class="kw">tick</span>()</span>
<span id="cb46-34"><a href="ranking.html#cb46-34"></a>}</span>
<span id="cb46-35"><a href="ranking.html#cb46-35"></a><span class="kw">saveRDS</span>(df_out, <span class="dt">file=</span><span class="st">&quot;./data/ranking.RDS&quot;</span>)</span></code></pre></div>
<p>Visualizing how the data frame looks like</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="ranking.html#cb47-1"></a>df_out &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;./data/ranking.RDS&quot;</span>)</span>
<span id="cb47-2"><a href="ranking.html#cb47-2"></a><span class="kw">kable</span>(dplyr<span class="op">::</span><span class="kw">sample_n</span>(df_out,<span class="dt">size=</span><span class="dv">10</span>), <span class="st">&quot;html&quot;</span>, <span class="dt">booktabs=</span>T, <span class="dt">format.args =</span> <span class="kw">list</span>(<span class="dt">scientific =</span> <span class="ot">FALSE</span>), <span class="dt">digits =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb47-3"><a href="ranking.html#cb47-3"></a><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span>))</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
algo0_name
</th>
<th style="text-align:right;">
algo0
</th>
<th style="text-align:left;">
algo1_name
</th>
<th style="text-align:right;">
algo1
</th>
<th style="text-align:right;">
y
</th>
<th style="text-align:right;">
simNumber
</th>
<th style="text-align:left;">
CostFunction
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
CMAES
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
RandomSearch1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
XinSheYang2N2
</td>
</tr>
<tr>
<td style="text-align:left;">
PSO
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Schwefel2d4N6
</td>
</tr>
<tr>
<td style="text-align:left;">
NelderMead
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
RandomSearch2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
QingN2
</td>
</tr>
<tr>
<td style="text-align:left;">
CuckooSearch
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
DiscusN2
</td>
</tr>
<tr>
<td style="text-align:left;">
CuckooSearch
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NelderMead
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Schwefel2d26N6
</td>
</tr>
<tr>
<td style="text-align:left;">
PSO
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
RandomSearch2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ZakharovN2
</td>
</tr>
<tr>
<td style="text-align:left;">
CMAES
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NelderMead
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
SalomonN2
</td>
</tr>
<tr>
<td style="text-align:left;">
CuckooSearch
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Price1
</td>
</tr>
<tr>
<td style="text-align:left;">
NelderMead
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
Giunta
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Schwefel2d21N6
</td>
</tr>
</tbody>
</table>
</div>
<div id="stan-model-2" class="section level2">
<h2><span class="header-section-number">4.2</span> Stan model</h2>
<p>The Stan model is specified in the file: <code>'./stanmodels/rankingmodel.stan'</code>. Note that at the end of the model we commented the generated quantities. This block generates the predictive posterior y_rep and the log likelihood, log_lik. These values are useful in diagnosing and validating the model but the end file is extremely large (~1Gb for 2000 iterations) and make many of the following calculations slow. If the reader wants to see these values is just to uncomment and run the stan model again</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="ranking.html#cb48-1"></a><span class="kw">print_stan_code</span>(<span class="st">&#39;./stanmodels/rankingmodel.stan&#39;</span>)</span></code></pre></div>
<pre><code>// Relative improvement model
// Author: David Issa Mattos
// Date: 22 June 2020
//
//

data {
 int &lt;lower=1&gt; N_total; // Sample size
 int y[N_total]; //variable that indicates which one wins algo0 oor algo 1

 int &lt;lower=1&gt; N_algorithm; // Number of algorithms
 
 int &lt;lower=1&gt; algo0[N_total];
 int &lt;lower=1&gt; algo1[N_total];
 
 // //To model the influence of each benchmark
 // int &lt;lower=1&gt; N_bm;
 // int bm_id[N_total];
}

parameters {
  real a_alg[N_algorithm]; //Latent variable that represents the strength value of each algorithm
}

model {
  real p[N_total];

  a_alg ~ normal(0,2);
  

  for (i in 1:N_total)
  {
     p[i] = a_alg[algo1[i]] - a_alg[algo0[i]];
  }
  
  y ~ bernoulli_logit(p);
}


//Uncoment this part to get the posterior predictives and the log likelihood
//But note that it takes a lot of space in the final model
// generated quantities{
//   vecor [N_total] y_rep;
//   vector[N_total] log_lik;
//   for(i in 1:N_total){
//     real p;
//     p = a_alg[algo1[i]] - a_alg[algo0[i]];
//     y_rep[i] = bernoulli_logit_rng(p);
//     
//     //Log likelihood
//      log_lik[i] = bernoulli_logit_lpmf(y[i] | p);
//   }
// }</code></pre>
<p>Let’s compile and start sampling with the Stan function. In the data folder you can find the specific data used to fit the model after all transformations <code>"./data/rankingmodel-data.RDS"</code></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="ranking.html#cb50-1"></a>standata &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb50-2"><a href="ranking.html#cb50-2"></a>  <span class="dt">N_total=</span><span class="kw">nrow</span>(df_out),</span>
<span id="cb50-3"><a href="ranking.html#cb50-3"></a>  <span class="dt">y =</span> <span class="kw">as.integer</span>(df_out<span class="op">$</span>y),</span>
<span id="cb50-4"><a href="ranking.html#cb50-4"></a>  <span class="dt">N_algorithm =</span> <span class="kw">length</span>(algorithms),</span>
<span id="cb50-5"><a href="ranking.html#cb50-5"></a>  <span class="dt">algo0=</span>df_out<span class="op">$</span>algo0,</span>
<span id="cb50-6"><a href="ranking.html#cb50-6"></a>  <span class="dt">algo1=</span>df_out<span class="op">$</span>algo1</span>
<span id="cb50-7"><a href="ranking.html#cb50-7"></a>  )</span>
<span id="cb50-8"><a href="ranking.html#cb50-8"></a><span class="kw">saveRDS</span>(standata, <span class="dt">file =</span> <span class="st">&quot;./data/rankingmodel-data.RDS&quot;</span>)</span></code></pre></div>
<p>For computation time sake we are not running this chunk every time we compile this document. From now on we will load from the saved Stan fit object. However, when we change our model or the data we can just run this chunk separately</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="ranking.html#cb51-1"></a>standata&lt;-<span class="kw">readRDS</span>(<span class="st">&quot;./data/rankingmodel-data.RDS&quot;</span>)</span>
<span id="cb51-2"><a href="ranking.html#cb51-2"></a>ranking.fit &lt;-<span class="st"> </span><span class="kw">stan</span>(<span class="dt">file =</span> <span class="st">&#39;./stanmodels/rankingmodel.stan&#39;</span>,</span>
<span id="cb51-3"><a href="ranking.html#cb51-3"></a>                     <span class="dt">data=</span>standata,</span>
<span id="cb51-4"><a href="ranking.html#cb51-4"></a>                     <span class="dt">chains =</span> <span class="dv">4</span>,</span>
<span id="cb51-5"><a href="ranking.html#cb51-5"></a>                     <span class="dt">warmup =</span> <span class="dv">200</span>,</span>
<span id="cb51-6"><a href="ranking.html#cb51-6"></a>                     <span class="dt">iter =</span> <span class="dv">3000</span>)</span>
<span id="cb51-7"><a href="ranking.html#cb51-7"></a><span class="kw">saveRDS</span>(ranking.fit, <span class="dt">file =</span> <span class="st">&quot;./data/ranking-fit.RDS&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="ranking.html#cb52-1"></a>ranking.fit &lt;-<span class="kw">readRDS</span>(<span class="st">&quot;./data/ranking-fit.RDS&quot;</span>)</span>
<span id="cb52-2"><a href="ranking.html#cb52-2"></a>a_alg &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a_alg[1]&quot;</span>,</span>
<span id="cb52-3"><a href="ranking.html#cb52-3"></a>           <span class="st">&quot;a_alg[2]&quot;</span>,</span>
<span id="cb52-4"><a href="ranking.html#cb52-4"></a>           <span class="st">&quot;a_alg[3]&quot;</span>,</span>
<span id="cb52-5"><a href="ranking.html#cb52-5"></a>           <span class="st">&quot;a_alg[4]&quot;</span>,</span>
<span id="cb52-6"><a href="ranking.html#cb52-6"></a>           <span class="st">&quot;a_alg[5]&quot;</span>,</span>
<span id="cb52-7"><a href="ranking.html#cb52-7"></a>           <span class="st">&quot;a_alg[6]&quot;</span>,</span>
<span id="cb52-8"><a href="ranking.html#cb52-8"></a>           <span class="st">&quot;a_alg[7]&quot;</span>,</span>
<span id="cb52-9"><a href="ranking.html#cb52-9"></a>           <span class="st">&quot;a_alg[8]&quot;</span>)</span></code></pre></div>
</div>
<div id="diagnosis-2" class="section level2">
<h2><span class="header-section-number">4.3</span> Diagnosis</h2>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="ranking.html#cb53-1"></a>rstan<span class="op">::</span><span class="kw">traceplot</span>(ranking.fit, <span class="dt">pars=</span>a_alg)</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-128-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Another diagnosis is to look at the Rhat. If Rhat is greater than 1.05 it indicates a divergence in the chains (they did not mix well). The table below shows a summary of the sampling.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="ranking.html#cb54-1"></a><span class="kw">kable</span>(<span class="kw">summary</span>(ranking.fit)<span class="op">$</span>summary) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb54-2"><a href="ranking.html#cb54-2"></a><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&#39;striped&#39;</span>,<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span> ))</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
se_mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
2.5%
</th>
<th style="text-align:right;">
25%
</th>
<th style="text-align:right;">
50%
</th>
<th style="text-align:right;">
75%
</th>
<th style="text-align:right;">
97.5%
</th>
<th style="text-align:right;">
n_eff
</th>
<th style="text-align:right;">
Rhat
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
a_alg[1]
</td>
<td style="text-align:right;">
0.3696071
</td>
<td style="text-align:right;">
0.0274756
</td>
<td style="text-align:right;">
0.7032806
</td>
<td style="text-align:right;">
-1.0712309
</td>
<td style="text-align:right;">
-0.0930206
</td>
<td style="text-align:right;">
0.3837413
</td>
<td style="text-align:right;">
0.8380181
</td>
<td style="text-align:right;">
1.7819029
</td>
<td style="text-align:right;">
655.1837
</td>
<td style="text-align:right;">
1.003792
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[2]
</td>
<td style="text-align:right;">
-0.2156327
</td>
<td style="text-align:right;">
0.0274038
</td>
<td style="text-align:right;">
0.7025901
</td>
<td style="text-align:right;">
-1.6603802
</td>
<td style="text-align:right;">
-0.6768489
</td>
<td style="text-align:right;">
-0.2051252
</td>
<td style="text-align:right;">
0.2527180
</td>
<td style="text-align:right;">
1.1842839
</td>
<td style="text-align:right;">
657.3298
</td>
<td style="text-align:right;">
1.003796
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[3]
</td>
<td style="text-align:right;">
0.9697466
</td>
<td style="text-align:right;">
0.0274442
</td>
<td style="text-align:right;">
0.7026793
</td>
<td style="text-align:right;">
-0.4771415
</td>
<td style="text-align:right;">
0.5074117
</td>
<td style="text-align:right;">
0.9861502
</td>
<td style="text-align:right;">
1.4364222
</td>
<td style="text-align:right;">
2.3771677
</td>
<td style="text-align:right;">
655.5615
</td>
<td style="text-align:right;">
1.003786
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[4]
</td>
<td style="text-align:right;">
-1.5743322
</td>
<td style="text-align:right;">
0.0274385
</td>
<td style="text-align:right;">
0.7040243
</td>
<td style="text-align:right;">
-3.0075916
</td>
<td style="text-align:right;">
-2.0374430
</td>
<td style="text-align:right;">
-1.5609753
</td>
<td style="text-align:right;">
-1.1089352
</td>
<td style="text-align:right;">
-0.1566811
</td>
<td style="text-align:right;">
658.3457
</td>
<td style="text-align:right;">
1.003665
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[5]
</td>
<td style="text-align:right;">
0.8663112
</td>
<td style="text-align:right;">
0.0274661
</td>
<td style="text-align:right;">
0.7031670
</td>
<td style="text-align:right;">
-0.5753947
</td>
<td style="text-align:right;">
0.4059510
</td>
<td style="text-align:right;">
0.8811888
</td>
<td style="text-align:right;">
1.3301487
</td>
<td style="text-align:right;">
2.2838648
</td>
<td style="text-align:right;">
655.4274
</td>
<td style="text-align:right;">
1.003823
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[6]
</td>
<td style="text-align:right;">
0.2095375
</td>
<td style="text-align:right;">
0.0274898
</td>
<td style="text-align:right;">
0.7027110
</td>
<td style="text-align:right;">
-1.2202323
</td>
<td style="text-align:right;">
-0.2522482
</td>
<td style="text-align:right;">
0.2229654
</td>
<td style="text-align:right;">
0.6764983
</td>
<td style="text-align:right;">
1.6093695
</td>
<td style="text-align:right;">
653.4481
</td>
<td style="text-align:right;">
1.003767
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[7]
</td>
<td style="text-align:right;">
0.2327811
</td>
<td style="text-align:right;">
0.0274277
</td>
<td style="text-align:right;">
0.7031632
</td>
<td style="text-align:right;">
-1.2068769
</td>
<td style="text-align:right;">
-0.2288522
</td>
<td style="text-align:right;">
0.2501319
</td>
<td style="text-align:right;">
0.7012086
</td>
<td style="text-align:right;">
1.6358498
</td>
<td style="text-align:right;">
657.2567
</td>
<td style="text-align:right;">
1.003844
</td>
</tr>
<tr>
<td style="text-align:left;">
a_alg[8]
</td>
<td style="text-align:right;">
-0.7405542
</td>
<td style="text-align:right;">
0.0274459
</td>
<td style="text-align:right;">
0.7038703
</td>
<td style="text-align:right;">
-2.1842576
</td>
<td style="text-align:right;">
-1.2029190
</td>
<td style="text-align:right;">
-0.7252634
</td>
<td style="text-align:right;">
-0.2739076
</td>
<td style="text-align:right;">
0.6674933
</td>
<td style="text-align:right;">
657.7034
</td>
<td style="text-align:right;">
1.003796
</td>
</tr>
<tr>
<td style="text-align:left;">
lp__
</td>
<td style="text-align:right;">
-4761.6122712
</td>
<td style="text-align:right;">
0.0383782
</td>
<td style="text-align:right;">
2.0180572
</td>
<td style="text-align:right;">
-4766.4097965
</td>
<td style="text-align:right;">
-4762.7381715
</td>
<td style="text-align:right;">
-4761.2851077
</td>
<td style="text-align:right;">
-4760.1370666
</td>
<td style="text-align:right;">
-4758.6808222
</td>
<td style="text-align:right;">
2765.0207
</td>
<td style="text-align:right;">
1.002815
</td>
</tr>
</tbody>
</table>
</div>
<div id="results-and-plots-2" class="section level2">
<h2><span class="header-section-number">4.4</span> Results and Plots</h2>
<p>First let’s get the HPDI interval for the “strength” parameters. Then we will sample the posterior and rank them and present the ranks with their respective posteriors.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="ranking.html#cb55-1"></a>hpdi &lt;-<span class="st"> </span><span class="kw">get_HPDI_from_stanfit</span>(ranking.fit)</span>
<span id="cb55-2"><a href="ranking.html#cb55-2"></a></span>
<span id="cb55-3"><a href="ranking.html#cb55-3"></a>hpdi_algorithm &lt;-<span class="st"> </span>hpdi <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb55-4"><a href="ranking.html#cb55-4"></a><span class="st">      </span>dplyr<span class="op">::</span><span class="kw">filter</span>(<span class="kw">str_detect</span>(Parameter, <span class="st">&quot;a_alg</span><span class="ch">\\</span><span class="st">[&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb55-5"><a href="ranking.html#cb55-5"></a><span class="st">      </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">Parameter=</span>algorithms) <span class="co">#Changing to the algorithms labels</span></span>
<span id="cb55-6"><a href="ranking.html#cb55-6"></a></span>
<span id="cb55-7"><a href="ranking.html#cb55-7"></a></span>
<span id="cb55-8"><a href="ranking.html#cb55-8"></a>p_alg&lt;-<span class="kw">ggplot</span>(<span class="dt">data=</span>hpdi_algorithm, <span class="kw">aes</span>(<span class="dt">x=</span>Parameter))<span class="op">+</span></span>
<span id="cb55-9"><a href="ranking.html#cb55-9"></a><span class="st">  </span><span class="kw">geom_pointrange</span>(<span class="kw">aes</span>(</span>
<span id="cb55-10"><a href="ranking.html#cb55-10"></a>    <span class="dt">ymin=</span>HPDI.lower, </span>
<span id="cb55-11"><a href="ranking.html#cb55-11"></a>    <span class="dt">ymax=</span>HPDI.higher, </span>
<span id="cb55-12"><a href="ranking.html#cb55-12"></a>    <span class="dt">y=</span>Mean))<span class="op">+</span></span>
<span id="cb55-13"><a href="ranking.html#cb55-13"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;Estimate&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Algorithm&quot;</span>, <span class="dt">title =</span> <span class="st">&quot;HPDI interval of the strength of the algorithms&quot;</span>)<span class="op">+</span></span>
<span id="cb55-14"><a href="ranking.html#cb55-14"></a><span class="st">  </span><span class="kw">coord_flip</span>()</span>
<span id="cb55-15"><a href="ranking.html#cb55-15"></a>p_alg <span class="co">#+ plot_annotation(title = &#39;HPDI interval for the algorithms strength&#39;)</span></span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-130-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Computing the ranks</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="ranking.html#cb56-1"></a>posterior &lt;-<span class="st"> </span>rstan<span class="op">::</span><span class="kw">extract</span>(ranking.fit)</span>
<span id="cb56-2"><a href="ranking.html#cb56-2"></a>a_alg &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(posterior<span class="op">$</span>a_alg)</span>
<span id="cb56-3"><a href="ranking.html#cb56-3"></a><span class="kw">colnames</span>(a_alg) &lt;-<span class="st"> </span>algorithms</span>
<span id="cb56-4"><a href="ranking.html#cb56-4"></a><span class="co">#sampling from the posterior</span></span>
<span id="cb56-5"><a href="ranking.html#cb56-5"></a>s &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">sample_n</span>(a_alg, <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace=</span>T)</span>
<span id="cb56-6"><a href="ranking.html#cb56-6"></a>s &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(s, <span class="dt">rown =</span> <span class="kw">row_number</span>())</span>
<span id="cb56-7"><a href="ranking.html#cb56-7"></a>wide_s &lt;-<span class="st"> </span>tidyr<span class="op">::</span><span class="kw">pivot_longer</span>(s, <span class="dt">cols=</span><span class="kw">all_of</span>(algorithms), <span class="dt">names_to =</span> <span class="st">&quot;Algorithm&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;a_alg&quot;</span>)</span>
<span id="cb56-8"><a href="ranking.html#cb56-8"></a>rank_df &lt;-<span class="st"> </span>wide_s <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-9"><a href="ranking.html#cb56-9"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(rown) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-10"><a href="ranking.html#cb56-10"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">Rank =</span> <span class="kw">rank</span>(<span class="op">-</span>a_alg, <span class="dt">ties.method =</span> <span class="st">&#39;random&#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-11"><a href="ranking.html#cb56-11"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-12"><a href="ranking.html#cb56-12"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>a_alg) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-13"><a href="ranking.html#cb56-13"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(Algorithm) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-14"><a href="ranking.html#cb56-14"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarise</span>(<span class="dt">MedianRank =</span> <span class="kw">median</span>(Rank),</span>
<span id="cb56-15"><a href="ranking.html#cb56-15"></a>                   <span class="dt">VarianceRank =</span> <span class="kw">var</span>(Rank)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-16"><a href="ranking.html#cb56-16"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">arrange</span>(MedianRank)</span></code></pre></div>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="ranking.html#cb57-1"></a>rank_df_table &lt;-<span class="st"> </span>rank_df</span>
<span id="cb57-2"><a href="ranking.html#cb57-2"></a><span class="kw">colnames</span>(rank_df_table) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Algorithm&quot;</span>,<span class="st">&quot;Median Rank&quot;</span>, <span class="st">&quot;Variance of the Rank&quot;</span>)</span>
<span id="cb57-3"><a href="ranking.html#cb57-3"></a><span class="kw">kable</span>(rank_df_table, <span class="st">&quot;html&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb57-4"><a href="ranking.html#cb57-4"></a><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&#39;striped&#39;</span>,<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span> ))</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Algorithm
</th>
<th style="text-align:right;">
Median Rank
</th>
<th style="text-align:right;">
Variance of the Rank
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
DifferentialEvolution
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0599640
</td>
</tr>
<tr>
<td style="text-align:left;">
PSO
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.0599640
</td>
</tr>
<tr>
<td style="text-align:left;">
CMAES
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.0216216
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.2472713
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.2358999
</td>
</tr>
<tr>
<td style="text-align:left;">
CuckooSearch
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
SimulatedAnnealing
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
NelderMead
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="ranking.html#cb58-1"></a>a_alg &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a_alg[1]&quot;</span>,</span>
<span id="cb58-2"><a href="ranking.html#cb58-2"></a>           <span class="st">&quot;a_alg[2]&quot;</span>,</span>
<span id="cb58-3"><a href="ranking.html#cb58-3"></a>           <span class="st">&quot;a_alg[3]&quot;</span>,</span>
<span id="cb58-4"><a href="ranking.html#cb58-4"></a>           <span class="st">&quot;a_alg[4]&quot;</span>,</span>
<span id="cb58-5"><a href="ranking.html#cb58-5"></a>           <span class="st">&quot;a_alg[5]&quot;</span>,</span>
<span id="cb58-6"><a href="ranking.html#cb58-6"></a>           <span class="st">&quot;a_alg[6]&quot;</span>,</span>
<span id="cb58-7"><a href="ranking.html#cb58-7"></a>           <span class="st">&quot;a_alg[7]&quot;</span>,</span>
<span id="cb58-8"><a href="ranking.html#cb58-8"></a>           <span class="st">&quot;a_alg[8]&quot;</span>)</span>
<span id="cb58-9"><a href="ranking.html#cb58-9"></a>rename_pars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">paste</span>(<span class="kw">rep</span>(<span class="st">&#39;a_&#39;</span>,<span class="kw">length</span>(algorithms)),algorithms, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb58-10"><a href="ranking.html#cb58-10"></a>t&lt;-<span class="kw">create_table_model</span>(ranking.fit, <span class="kw">c</span>(a_alg),rename_pars)</span>
<span id="cb58-11"><a href="ranking.html#cb58-11"></a><span class="kw">saveRDS</span>(t,<span class="st">&#39;./statscomp-paper/tables/datafortables/ranking-par-table.RDS&#39;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="relative-improvement.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="time-to-complete.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
