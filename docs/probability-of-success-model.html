<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Probability of success model | Statistical Models for Benchmark Comparison</title>
  <meta name="description" content="Chapter 3 Probability of success model | Statistical Models for Benchmark Comparison" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Probability of success model | Statistical Models for Benchmark Comparison" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Probability of success model | Statistical Models for Benchmark Comparison" />
  
  
  

<meta name="author" content="David Issa Mattos" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-1.html"/>
<link rel="next" href="relative-improvement.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pre-requisites"><i class="fa fa-check"></i>Pre-requisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#source-code"><i class="fa fa-check"></i>Source code</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#compiling-this-document"><i class="fa fa-check"></i>Compiling this document</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-environment"><i class="fa fa-check"></i>Software environment</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#the-simulation"><i class="fa fa-check"></i><b>1.1</b> The simulation</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#exploring-the-dataset"><i class="fa fa-check"></i><b>1.1.1</b> Exploring the dataset</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#column-definitions"><i class="fa fa-check"></i><b>1.1.2</b> Column definitions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-1.html"><a href="introduction-1.html#the-simulation-1"><i class="fa fa-check"></i><b>2.1</b> The simulation</a><ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-1.html"><a href="introduction-1.html#exploring-the-dataset-1"><i class="fa fa-check"></i><b>2.1.1</b> Exploring the dataset</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction-1.html"><a href="introduction-1.html#column-definitions-1"><i class="fa fa-check"></i><b>2.1.2</b> Column definitions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html"><i class="fa fa-check"></i><b>3</b> Probability of success model</a><ul>
<li class="chapter" data-level="3.1" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#data-preparation"><i class="fa fa-check"></i><b>3.1</b> Data preparation</a></li>
<li class="chapter" data-level="3.2" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#stan-model"><i class="fa fa-check"></i><b>3.2</b> Stan model</a></li>
<li class="chapter" data-level="3.3" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#diagnosis"><i class="fa fa-check"></i><b>3.3</b> Diagnosis</a></li>
<li class="chapter" data-level="3.4" data-path="probability-of-success-model.html"><a href="probability-of-success-model.html#results-and-plots"><i class="fa fa-check"></i><b>3.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="relative-improvement.html"><a href="relative-improvement.html"><i class="fa fa-check"></i><b>4</b> Relative improvement</a><ul>
<li class="chapter" data-level="4.1" data-path="relative-improvement.html"><a href="relative-improvement.html#data-preparation-1"><i class="fa fa-check"></i><b>4.1</b> Data preparation</a></li>
<li class="chapter" data-level="4.2" data-path="relative-improvement.html"><a href="relative-improvement.html#stan-model-1"><i class="fa fa-check"></i><b>4.2</b> Stan model</a></li>
<li class="chapter" data-level="4.3" data-path="relative-improvement.html"><a href="relative-improvement.html#diagnosis-1"><i class="fa fa-check"></i><b>4.3</b> Diagnosis</a></li>
<li class="chapter" data-level="4.4" data-path="relative-improvement.html"><a href="relative-improvement.html#results-and-plots-1"><i class="fa fa-check"></i><b>4.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ranking.html"><a href="ranking.html"><i class="fa fa-check"></i><b>5</b> Ranking</a><ul>
<li class="chapter" data-level="5.1" data-path="ranking.html"><a href="ranking.html#data-preparation-2"><i class="fa fa-check"></i><b>5.1</b> Data preparation</a></li>
<li class="chapter" data-level="5.2" data-path="ranking.html"><a href="ranking.html#stan-model-2"><i class="fa fa-check"></i><b>5.2</b> Stan model</a></li>
<li class="chapter" data-level="5.3" data-path="ranking.html"><a href="ranking.html#diagnosis-2"><i class="fa fa-check"></i><b>5.3</b> Diagnosis</a></li>
<li class="chapter" data-level="5.4" data-path="ranking.html"><a href="ranking.html#results-and-plots-2"><i class="fa fa-check"></i><b>5.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="time-to-complete.html"><a href="time-to-complete.html"><i class="fa fa-check"></i><b>6</b> Time to complete</a><ul>
<li class="chapter" data-level="6.1" data-path="time-to-complete.html"><a href="time-to-complete.html#data-preparation-3"><i class="fa fa-check"></i><b>6.1</b> Data preparation</a></li>
<li class="chapter" data-level="6.2" data-path="time-to-complete.html"><a href="time-to-complete.html#stan-model-3"><i class="fa fa-check"></i><b>6.2</b> Stan model</a></li>
<li class="chapter" data-level="6.3" data-path="time-to-complete.html"><a href="time-to-complete.html#diagnosis-3"><i class="fa fa-check"></i><b>6.3</b> Diagnosis</a></li>
<li class="chapter" data-level="6.4" data-path="time-to-complete.html"><a href="time-to-complete.html#results-and-plots-3"><i class="fa fa-check"></i><b>6.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html"><i class="fa fa-check"></i><b>7</b> Multiple-group comparison</a><ul>
<li class="chapter" data-level="7.1" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#data-preparation-4"><i class="fa fa-check"></i><b>7.1</b> Data preparation</a></li>
<li class="chapter" data-level="7.2" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#stan-model-4"><i class="fa fa-check"></i><b>7.2</b> Stan model</a></li>
<li class="chapter" data-level="7.3" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#diagnosis-4"><i class="fa fa-check"></i><b>7.3</b> Diagnosis</a></li>
<li class="chapter" data-level="7.4" data-path="multiple-group-comparison.html"><a href="multiple-group-comparison.html#results-and-plots-4"><i class="fa fa-check"></i><b>7.4</b> Results and Plots</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="sensitivity-analysis-and-model-comparison.html"><a href="sensitivity-analysis-and-model-comparison.html"><i class="fa fa-check"></i><b>8</b> Sensitivity analysis and model comparison</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistical Models for Benchmark Comparison</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="probability-of-success-model" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Probability of success model</h1>
<p>Our first model can be used to address problems such as:</p>
<p><strong>RQ1</strong> What is the probability of each solving a problem at precision <span class="math inline">\(\epsilon=0.1\)</span>?</p>
<p><strong>RQ2</strong> What is the impact of noise in the probability of success of each algorithm?</p>
<div id="data-preparation" class="section level2">
<h2><span class="header-section-number">3.1</span> Data preparation</h2>
<p>We start importing the dataset</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="probability-of-success-model.html#cb9-1"></a>dataset &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;./data/statscomp.csv&quot;</span>)</span></code></pre></div>
<p>Let’s select only the columns that interests us. Note that some of the columns have "" because of the “-” in the column name</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="probability-of-success-model.html#cb10-1"></a>dataset &lt;-<span class="st"> </span><span class="kw">select</span>(dataset, Algorithm, CostFunction, SD, MaxFevalPerDimensions, simNumber, SolveAt1, </span>
<span id="cb10-2"><a href="probability-of-success-model.html#cb10-2"></a>    <span class="st">&quot;SolveAt1e-1&quot;</span>, <span class="st">&quot;SolveAt1e-3&quot;</span>, <span class="st">&quot;SolveAt1e-6&quot;</span>, OptimizationSuccessful)</span></code></pre></div>
<p>Let’s do some basic transformation</p>
<p>1 - We select only the cases where the optimization completed
2 - We convert True to 1 and 0 to false
3 - We group by the algorithms, functions, SD, and budget so we can summarize and create aggregated data
4 - We create an index of each algorithm and the cost functions. This is basically creating a map of NelderMead=1, PSO=2 etc… This makes things easier to work in Stan. For that we use the function create_index from the utils.R file<br />
5 - We drop the columns we wont use
6 - Get an array with the names of the benchmark functions and the algorithms (to create nicer plots later with lengend)</p>
<p>Since we are only looking at 1e-1 for the precision we comment the other lines</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="probability-of-success-model.html#cb11-1"></a>d &lt;-<span class="st"> </span>dataset <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(OptimizationSuccessful <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">solvedAt1e1 =</span> <span class="kw">as.integer</span>(dataset<span class="op">$</span><span class="st">&quot;SolveAt1e-1&quot;</span>), </span>
<span id="cb11-2"><a href="probability-of-success-model.html#cb11-2"></a>    <span class="dt">budget =</span> MaxFevalPerDimensions) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(Algorithm, CostFunction, SD, budget) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-3"><a href="probability-of-success-model.html#cb11-3"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(<span class="dt">solvedAt1e1 =</span> <span class="kw">sum</span>(solvedAt1e1), <span class="dt">N =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">AlgorithmID =</span> <span class="kw">create_index</span>(Algorithm), </span>
<span id="cb11-4"><a href="probability-of-success-model.html#cb11-4"></a>    <span class="dt">CostFunctionID =</span> <span class="kw">create_index</span>(CostFunction)) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(Algorithm, AlgorithmID, CostFunction, </span>
<span id="cb11-5"><a href="probability-of-success-model.html#cb11-5"></a>    CostFunctionID, SD, budget, N, <span class="dt">y =</span> solvedAt1e1, )</span>
<span id="cb11-6"><a href="probability-of-success-model.html#cb11-6"></a></span>
<span id="cb11-7"><a href="probability-of-success-model.html#cb11-7"></a><span class="co"># List of algorithms</span></span>
<span id="cb11-8"><a href="probability-of-success-model.html#cb11-8"></a>bm &lt;-<span class="st"> </span><span class="kw">get_index_names_as_array</span>(d<span class="op">$</span>CostFunction)</span>
<span id="cb11-9"><a href="probability-of-success-model.html#cb11-9"></a>algorithms &lt;-<span class="st"> </span><span class="kw">get_index_names_as_array</span>(d<span class="op">$</span>Algorithm)</span></code></pre></div>
<p>Lets preview a sample of the data set</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="probability-of-success-model.html#cb12-1"></a><span class="kw">kable</span>(dplyr<span class="op">::</span><span class="kw">sample_n</span>(d, <span class="dt">size =</span> <span class="dv">10</span>), <span class="st">&quot;html&quot;</span>, <span class="dt">booktabs =</span> T, <span class="dt">format.args =</span> <span class="kw">list</span>(<span class="dt">scientific =</span> <span class="ot">FALSE</span>), </span>
<span id="cb12-2"><a href="probability-of-success-model.html#cb12-2"></a>    <span class="dt">digits =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span>))</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Algorithm
</th>
<th style="text-align:right;">
AlgorithmID
</th>
<th style="text-align:left;">
CostFunction
</th>
<th style="text-align:right;">
CostFunctionID
</th>
<th style="text-align:right;">
SD
</th>
<th style="text-align:right;">
budget
</th>
<th style="text-align:right;">
N
</th>
<th style="text-align:right;">
y
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
RandomSearch1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Damavandi
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
NelderMead
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Schwefel2d26N6
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
RosenbrockRotatedN6
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
PSO
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Schwefel2d4N6
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10000
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
NelderMead
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
SalomonN2
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Trefethen
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
XinSheYang2N2
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
PinterN6
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
RandomSearch1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
ThreeHumpCamelBack
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
CMAES
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Schwefel2d21N6
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
10
</td>
</tr>
</tbody>
</table>
</div>
<div id="stan-model" class="section level2">
<h2><span class="header-section-number">3.2</span> Stan model</h2>
<p>The Stan model is specified in the file: <code>'./stanmodels/probsuccess.stan'</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="probability-of-success-model.html#cb13-1"></a><span class="kw">print_stan_code</span>(<span class="st">&quot;./stanmodels/probsuccess.stan&quot;</span>)</span></code></pre></div>
<pre><code>// Probability of success model
// Author: David Issa Mattos
// Date: 16 June 2020
//
//

data {
 int &lt;lower=1&gt; N_total; // Sample size
 int y[N_total]; // Result of the binomial
 int N_draw[N_total]; // Number of draws in the binomial
 
 real x_noise[N_total];//predictor for noise
 
 //To model each algorithm independently
 int &lt;lower=1&gt; N_algorithm; // Number of algorithms
 int algorithm_id[N_total]; //vector that has the id of each algorithm
 
 //To model the influence of each benchmark
 int &lt;lower=1&gt; N_bm;
 int bm_id[N_total];
}

parameters {
  //Fixed effect
  real a_alg[N_algorithm];//the mean effect given by the algorithms
  real b_noise[N_algorithm];//slope for the noise

  // //Random effect. The effect of the benchmarks
  real a_bm_norm[N_bm];//the mean effect given by the base class type
  real&lt;lower=0&gt; s;//std for the random effects
  
}

model {
  real p[N_total];
  
  //Fixed effect
  a_alg ~ normal(0,1);
  b_noise ~ normal(0,1);

  // //Random effects
  s ~ exponential(1);
  a_bm_norm ~ normal(0,1);

  for (i in 1:N_total)
  {
    
     p[i] = a_alg[algorithm_id[i]]+ a_bm_norm[bm_id[i]]*s + b_noise[algorithm_id[i]] * x_noise[i];
  }
  
  //Equivalent to: y~binomial(N, inverse_logit(a+bx=alpha))
  y ~ binomial_logit(N_draw,p);
}</code></pre>
<p>Let’s compile and start sampling with the Stan function. In the data folder you can find the specific data used to fit the model after all transformations <code>"./data/probsuccsess-data.RDS"</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="probability-of-success-model.html#cb15-1"></a>standata &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">N_total =</span> <span class="kw">nrow</span>(d), <span class="dt">y =</span> d<span class="op">$</span>y, <span class="dt">N_draw =</span> d<span class="op">$</span>N, <span class="dt">x_noise =</span> d<span class="op">$</span>SD, <span class="dt">N_algorithm =</span> <span class="kw">length</span>(algorithms), </span>
<span id="cb15-2"><a href="probability-of-success-model.html#cb15-2"></a>    <span class="dt">algorithm_id =</span> d<span class="op">$</span>AlgorithmID, <span class="dt">N_bm =</span> <span class="kw">length</span>(bm), <span class="dt">bm_id =</span> d<span class="op">$</span>CostFunctionID)</span>
<span id="cb15-3"><a href="probability-of-success-model.html#cb15-3"></a><span class="kw">saveRDS</span>(standata, <span class="dt">file =</span> <span class="st">&quot;./data/probsuccsess-data.RDS&quot;</span>)</span></code></pre></div>
<p>For computation time sake we are not running this chunk every time we compile this document. From now on we will load from the saved Stan fit object. However, when we change our model or the data we can just run this chunk separately</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="probability-of-success-model.html#cb16-1"></a>standata &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;./data/probsuccsess-data.RDS&quot;</span>)</span>
<span id="cb16-2"><a href="probability-of-success-model.html#cb16-2"></a>probsuccess.fit &lt;-<span class="st"> </span><span class="kw">stan</span>(<span class="dt">file =</span> <span class="st">&quot;./stanmodels/probsuccess.stan&quot;</span>, <span class="dt">data =</span> standata, <span class="dt">chains =</span> <span class="dv">4</span>, </span>
<span id="cb16-3"><a href="probability-of-success-model.html#cb16-3"></a>    <span class="dt">warmup =</span> <span class="dv">200</span>, <span class="dt">iter =</span> <span class="dv">2000</span>)</span>
<span id="cb16-4"><a href="probability-of-success-model.html#cb16-4"></a><span class="kw">saveRDS</span>(probsuccess.fit, <span class="dt">file =</span> <span class="st">&quot;./data/probsuccsess-fit.RDS&quot;</span>)</span></code></pre></div>
</div>
<div id="diagnosis" class="section level2">
<h2><span class="header-section-number">3.3</span> Diagnosis</h2>
<p>The first step is to evaluate the convergence of the chains. We will look now only for the slopes, algorithms intercept and the standard deviation of the random effects</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="probability-of-success-model.html#cb17-1"></a>a_alg &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a_alg[1]&quot;</span>, <span class="st">&quot;a_alg[2]&quot;</span>, <span class="st">&quot;a_alg[3]&quot;</span>, <span class="st">&quot;a_alg[4]&quot;</span>, <span class="st">&quot;a_alg[5]&quot;</span>, <span class="st">&quot;a_alg[6]&quot;</span>, <span class="st">&quot;a_alg[7]&quot;</span>, </span>
<span id="cb17-2"><a href="probability-of-success-model.html#cb17-2"></a>    <span class="st">&quot;a_alg[8]&quot;</span>)</span>
<span id="cb17-3"><a href="probability-of-success-model.html#cb17-3"></a>b_noise &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;b_noise[1]&quot;</span>, <span class="st">&quot;b_noise[2]&quot;</span>, <span class="st">&quot;b_noise[3]&quot;</span>, <span class="st">&quot;b_noise[4]&quot;</span>, <span class="st">&quot;b_noise[5]&quot;</span>, <span class="st">&quot;b_noise[6]&quot;</span>, </span>
<span id="cb17-4"><a href="probability-of-success-model.html#cb17-4"></a>    <span class="st">&quot;b_noise[7]&quot;</span>, <span class="st">&quot;b_noise[8]&quot;</span>)</span>
<span id="cb17-5"><a href="probability-of-success-model.html#cb17-5"></a>rstan<span class="op">::</span><span class="kw">traceplot</span>(probsuccess.fit, <span class="dt">pars =</span> a_alg)</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-18-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="probability-of-success-model.html#cb18-1"></a>rstan<span class="op">::</span><span class="kw">traceplot</span>(probsuccess.fit, <span class="dt">pars =</span> b_noise)</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-18-2.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="probability-of-success-model.html#cb19-1"></a>rstan<span class="op">::</span><span class="kw">traceplot</span>(probsuccess.fit, <span class="dt">pars =</span> <span class="kw">c</span>(<span class="st">&quot;s&quot;</span>))</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-18-3.png" width="672" style="display: block; margin: auto;" /></p>
<p>Another diagnosis is to look at the Rhat. If Rhat is greater than 1.01 it indicates a divergence in the chains (they did not mix well). The table below shows a summary of the sampling.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="probability-of-success-model.html#cb20-1"></a><span class="kw">kable</span>(<span class="kw">summary</span>(probsuccess.fit)<span class="op">$</span>summary) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>, </span>
<span id="cb20-2"><a href="probability-of-success-model.html#cb20-2"></a>    <span class="st">&quot;condensed&quot;</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th></th>
<th align="center">mean</th>
<th align="left">se_mean</th>
<th align="center">sd</th>
<th align="center">2.5%</th>
<th align="center">25%</th>
<th align="center">50%</th>
<th align="center">75%</th>
<th align="center">97.5%</th>
<th align="center">n_eff</th>
<th align="center">Rhat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>a_alg[1]</td>
<td align="center">0.9946071</td>
<td align="left">0.0148192</td>
<td align="center">0.3290572</td>
<td align="center">0.3618872</td>
<td align="center">0.7721788</td>
<td align="center">0.9866326</td>
<td align="center">1.2147485</td>
<td align="center">1.6573538</td>
<td align="center">493.0550</td>
<td align="center">1.0036977</td>
</tr>
<tr class="even">
<td>a_alg[2]</td>
<td align="center">-1.4321112</td>
<td align="left">0.0148480</td>
<td align="center">0.3340389</td>
<td align="center">-2.0771512</td>
<td align="center">-1.6564318</td>
<td align="center">-1.4395342</td>
<td align="center">-1.2113320</td>
<td align="center">-0.7558657</td>
<td align="center">506.1224</td>
<td align="center">1.0034682</td>
</tr>
<tr class="odd">
<td>a_alg[3]</td>
<td align="center">0.8838772</td>
<td align="left">0.0147919</td>
<td align="center">0.3291742</td>
<td align="center">0.2551902</td>
<td align="center">0.6568310</td>
<td align="center">0.8759522</td>
<td align="center">1.1036079</td>
<td align="center">1.5423992</td>
<td align="center">495.2249</td>
<td align="center">1.0033757</td>
</tr>
<tr class="even">
<td>a_alg[4]</td>
<td align="center">-3.1850027</td>
<td align="left">0.0145669</td>
<td align="center">0.3454132</td>
<td align="center">-3.8454788</td>
<td align="center">-3.4179437</td>
<td align="center">-3.1915344</td>
<td align="center">-2.9594851</td>
<td align="center">-2.4831115</td>
<td align="center">562.2713</td>
<td align="center">1.0028309</td>
</tr>
<tr class="odd">
<td>a_alg[5]</td>
<td align="center">0.7028661</td>
<td align="left">0.0149930</td>
<td align="center">0.3305516</td>
<td align="center">0.0671596</td>
<td align="center">0.4751224</td>
<td align="center">0.6970125</td>
<td align="center">0.9255912</td>
<td align="center">1.3781179</td>
<td align="center">486.0700</td>
<td align="center">1.0036165</td>
</tr>
<tr class="even">
<td>a_alg[6]</td>
<td align="center">-1.4422315</td>
<td align="left">0.0148736</td>
<td align="center">0.3342055</td>
<td align="center">-2.0748216</td>
<td align="center">-1.6725905</td>
<td align="center">-1.4474044</td>
<td align="center">-1.2200929</td>
<td align="center">-0.7810854</td>
<td align="center">504.8892</td>
<td align="center">1.0030701</td>
</tr>
<tr class="odd">
<td>a_alg[7]</td>
<td align="center">-0.8948662</td>
<td align="left">0.0147322</td>
<td align="center">0.3306491</td>
<td align="center">-1.5328720</td>
<td align="center">-1.1188970</td>
<td align="center">-0.9022392</td>
<td align="center">-0.6729730</td>
<td align="center">-0.2203865</td>
<td align="center">503.7352</td>
<td align="center">1.0030168</td>
</tr>
<tr class="even">
<td>a_alg[8]</td>
<td align="center">-1.1009767</td>
<td align="left">0.0147796</td>
<td align="center">0.3326966</td>
<td align="center">-1.7430722</td>
<td align="center">-1.3272842</td>
<td align="center">-1.1045184</td>
<td align="center">-0.8799628</td>
<td align="center">-0.4279465</td>
<td align="center">506.7227</td>
<td align="center">1.0034475</td>
</tr>
<tr class="odd">
<td>b_noise[1]</td>
<td align="center">-1.2633976</td>
<td align="left">0.0005300</td>
<td align="center">0.0459951</td>
<td align="center">-1.3541275</td>
<td align="center">-1.2943863</td>
<td align="center">-1.2629590</td>
<td align="center">-1.2316701</td>
<td align="center">-1.1753833</td>
<td align="center">7530.4952</td>
<td align="center">0.9997559</td>
</tr>
<tr class="even">
<td>b_noise[2]</td>
<td align="center">-0.8099152</td>
<td align="left">0.0007618</td>
<td align="center">0.0596258</td>
<td align="center">-0.9301217</td>
<td align="center">-0.8503491</td>
<td align="center">-0.8098407</td>
<td align="center">-0.7689690</td>
<td align="center">-0.6947710</td>
<td align="center">6126.8076</td>
<td align="center">0.9998526</td>
</tr>
<tr class="odd">
<td>b_noise[3]</td>
<td align="center">-1.3428084</td>
<td align="left">0.0006179</td>
<td align="center">0.0504481</td>
<td align="center">-1.4425540</td>
<td align="center">-1.3763821</td>
<td align="center">-1.3417232</td>
<td align="center">-1.3093450</td>
<td align="center">-1.2463675</td>
<td align="center">6665.2114</td>
<td align="center">1.0005741</td>
</tr>
<tr class="even">
<td>b_noise[4]</td>
<td align="center">-0.3988165</td>
<td align="left">0.0008430</td>
<td align="center">0.0713629</td>
<td align="center">-0.5403377</td>
<td align="center">-0.4468691</td>
<td align="center">-0.3988481</td>
<td align="center">-0.3495032</td>
<td align="center">-0.2631669</td>
<td align="center">7165.6523</td>
<td align="center">0.9996902</td>
</tr>
<tr class="odd">
<td>b_noise[5]</td>
<td align="center">-1.1391536</td>
<td align="left">0.0005661</td>
<td align="center">0.0468626</td>
<td align="center">-1.2323387</td>
<td align="center">-1.1698545</td>
<td align="center">-1.1391343</td>
<td align="center">-1.1064296</td>
<td align="center">-1.0489285</td>
<td align="center">6851.9886</td>
<td align="center">1.0001047</td>
</tr>
<tr class="even">
<td>b_noise[6]</td>
<td align="center">-0.7920796</td>
<td align="left">0.0007000</td>
<td align="center">0.0585343</td>
<td align="center">-0.9083656</td>
<td align="center">-0.8306712</td>
<td align="center">-0.7911704</td>
<td align="center">-0.7529028</td>
<td align="center">-0.6788131</td>
<td align="center">6992.1559</td>
<td align="center">0.9996895</td>
</tr>
<tr class="odd">
<td>b_noise[7]</td>
<td align="center">-0.9597663</td>
<td align="left">0.0006727</td>
<td align="center">0.0565742</td>
<td align="center">-1.0723302</td>
<td align="center">-0.9982250</td>
<td align="center">-0.9584665</td>
<td align="center">-0.9211403</td>
<td align="center">-0.8522974</td>
<td align="center">7072.0237</td>
<td align="center">0.9998860</td>
</tr>
<tr class="even">
<td>b_noise[8]</td>
<td align="center">-0.7202239</td>
<td align="left">0.0005731</td>
<td align="center">0.0512429</td>
<td align="center">-0.8212971</td>
<td align="center">-0.7539867</td>
<td align="center">-0.7204663</td>
<td align="center">-0.6863093</td>
<td align="center">-0.6199107</td>
<td align="center">7995.2269</td>
<td align="center">1.0000129</td>
</tr>
<tr class="odd">
<td>a_bm_norm[1]</td>
<td align="center">-0.9527650</td>
<td align="left">0.0058266</td>
<td align="center">0.1640450</td>
<td align="center">-1.2986550</td>
<td align="center">-1.0574763</td>
<td align="center">-0.9449164</td>
<td align="center">-0.8405614</td>
<td align="center">-0.6556160</td>
<td align="center">792.6796</td>
<td align="center">1.0007526</td>
</tr>
<tr class="even">
<td>a_bm_norm[2]</td>
<td align="center">-1.7380809</td>
<td align="left">0.0092187</td>
<td align="center">0.2825468</td>
<td align="center">-2.3365043</td>
<td align="center">-1.9177435</td>
<td align="center">-1.7267402</td>
<td align="center">-1.5394417</td>
<td align="center">-1.2274041</td>
<td align="center">939.3784</td>
<td align="center">1.0007376</td>
</tr>
<tr class="odd">
<td>a_bm_norm[3]</td>
<td align="center">-1.0105804</td>
<td align="left">0.0059796</td>
<td align="center">0.1701593</td>
<td align="center">-1.3624826</td>
<td align="center">-1.1232509</td>
<td align="center">-1.0009202</td>
<td align="center">-0.8910774</td>
<td align="center">-0.6980189</td>
<td align="center">809.7860</td>
<td align="center">1.0007038</td>
</tr>
<tr class="even">
<td>a_bm_norm[4]</td>
<td align="center">0.2285718</td>
<td align="left">0.0071118</td>
<td align="center">0.1511781</td>
<td align="center">-0.0474446</td>
<td align="center">0.1236682</td>
<td align="center">0.2220277</td>
<td align="center">0.3239097</td>
<td align="center">0.5546319</td>
<td align="center">451.8765</td>
<td align="center">1.0052771</td>
</tr>
<tr class="odd">
<td>a_bm_norm[5]</td>
<td align="center">-1.2979137</td>
<td align="left">0.0071315</td>
<td align="center">0.2068445</td>
<td align="center">-1.7327485</td>
<td align="center">-1.4332758</td>
<td align="center">-1.2871085</td>
<td align="center">-1.1531152</td>
<td align="center">-0.9203510</td>
<td align="center">841.2615</td>
<td align="center">1.0010337</td>
</tr>
<tr class="even">
<td>a_bm_norm[6]</td>
<td align="center">-0.5507772</td>
<td align="left">0.0051477</td>
<td align="center">0.1329175</td>
<td align="center">-0.8274771</td>
<td align="center">-0.6393456</td>
<td align="center">-0.5449455</td>
<td align="center">-0.4606890</td>
<td align="center">-0.2952643</td>
<td align="center">666.7008</td>
<td align="center">1.0006213</td>
</tr>
<tr class="odd">
<td>a_bm_norm[7]</td>
<td align="center">1.5473018</td>
<td align="left">0.0145426</td>
<td align="center">0.3063036</td>
<td align="center">0.9970505</td>
<td align="center">1.3284599</td>
<td align="center">1.5297401</td>
<td align="center">1.7409851</td>
<td align="center">2.2044622</td>
<td align="center">443.6269</td>
<td align="center">1.0066939</td>
</tr>
<tr class="even">
<td>a_bm_norm[8]</td>
<td align="center">0.9056046</td>
<td align="left">0.0106608</td>
<td align="center">0.2225983</td>
<td align="center">0.5103041</td>
<td align="center">0.7481791</td>
<td align="center">0.8917652</td>
<td align="center">1.0480799</td>
<td align="center">1.3821662</td>
<td align="center">435.9790</td>
<td align="center">1.0067902</td>
</tr>
<tr class="odd">
<td>a_bm_norm[9]</td>
<td align="center">-2.5626916</td>
<td align="left">0.0098359</td>
<td align="center">0.4670434</td>
<td align="center">-3.5955508</td>
<td align="center">-2.8496381</td>
<td align="center">-2.5244053</td>
<td align="center">-2.2364610</td>
<td align="center">-1.7583805</td>
<td align="center">2254.6803</td>
<td align="center">1.0004011</td>
</tr>
<tr class="even">
<td>a_bm_norm[10]</td>
<td align="center">-0.3950607</td>
<td align="left">0.0051346</td>
<td align="center">0.1278234</td>
<td align="center">-0.6601937</td>
<td align="center">-0.4780462</td>
<td align="center">-0.3914228</td>
<td align="center">-0.3109385</td>
<td align="center">-0.1480920</td>
<td align="center">619.7451</td>
<td align="center">1.0014863</td>
</tr>
<tr class="odd">
<td>a_bm_norm[11]</td>
<td align="center">-0.8740592</td>
<td align="left">0.0055704</td>
<td align="center">0.1554762</td>
<td align="center">-1.1997542</td>
<td align="center">-0.9759484</td>
<td align="center">-0.8679696</td>
<td align="center">-0.7659328</td>
<td align="center">-0.5848577</td>
<td align="center">779.0311</td>
<td align="center">1.0001963</td>
</tr>
<tr class="even">
<td>a_bm_norm[12]</td>
<td align="center">0.4838904</td>
<td align="left">0.0083772</td>
<td align="center">0.1750863</td>
<td align="center">0.1753386</td>
<td align="center">0.3569926</td>
<td align="center">0.4736147</td>
<td align="center">0.5964012</td>
<td align="center">0.8564897</td>
<td align="center">436.8238</td>
<td align="center">1.0064032</td>
</tr>
<tr class="odd">
<td>a_bm_norm[13]</td>
<td align="center">-0.3262289</td>
<td align="left">0.0052969</td>
<td align="center">0.1280675</td>
<td align="center">-0.5837855</td>
<td align="center">-0.4113456</td>
<td align="center">-0.3231585</td>
<td align="center">-0.2420871</td>
<td align="center">-0.0702349</td>
<td align="center">584.5571</td>
<td align="center">1.0013819</td>
</tr>
<tr class="even">
<td>a_bm_norm[14]</td>
<td align="center">-0.8278555</td>
<td align="left">0.0055364</td>
<td align="center">0.1519790</td>
<td align="center">-1.1457247</td>
<td align="center">-0.9256599</td>
<td align="center">-0.8196604</td>
<td align="center">-0.7241520</td>
<td align="center">-0.5501589</td>
<td align="center">753.5365</td>
<td align="center">1.0001462</td>
</tr>
<tr class="odd">
<td>a_bm_norm[15]</td>
<td align="center">-0.6318079</td>
<td align="left">0.0050920</td>
<td align="center">0.1383457</td>
<td align="center">-0.9195265</td>
<td align="center">-0.7194981</td>
<td align="center">-0.6271263</td>
<td align="center">-0.5391648</td>
<td align="center">-0.3673415</td>
<td align="center">738.1523</td>
<td align="center">1.0002242</td>
</tr>
<tr class="even">
<td>a_bm_norm[16]</td>
<td align="center">-0.3773009</td>
<td align="left">0.0051681</td>
<td align="center">0.1279449</td>
<td align="center">-0.6353464</td>
<td align="center">-0.4607384</td>
<td align="center">-0.3736860</td>
<td align="center">-0.2931876</td>
<td align="center">-0.1271949</td>
<td align="center">612.9012</td>
<td align="center">1.0015522</td>
</tr>
<tr class="odd">
<td>a_bm_norm[17]</td>
<td align="center">-0.5210612</td>
<td align="left">0.0052287</td>
<td align="center">0.1336631</td>
<td align="center">-0.7950268</td>
<td align="center">-0.6089748</td>
<td align="center">-0.5165403</td>
<td align="center">-0.4308585</td>
<td align="center">-0.2673398</td>
<td align="center">653.4800</td>
<td align="center">1.0008857</td>
</tr>
<tr class="even">
<td>a_bm_norm[18]</td>
<td align="center">-0.0956786</td>
<td align="left">0.0058456</td>
<td align="center">0.1323205</td>
<td align="center">-0.3513172</td>
<td align="center">-0.1820726</td>
<td align="center">-0.0995839</td>
<td align="center">-0.0109864</td>
<td align="center">0.1746857</td>
<td align="center">512.3876</td>
<td align="center">1.0034467</td>
</tr>
<tr class="odd">
<td>a_bm_norm[19]</td>
<td align="center">-1.7358133</td>
<td align="left">0.0093561</td>
<td align="center">0.2823701</td>
<td align="center">-2.3252919</td>
<td align="center">-1.9162240</td>
<td align="center">-1.7227131</td>
<td align="center">-1.5343894</td>
<td align="center">-1.2305982</td>
<td align="center">910.8451</td>
<td align="center">1.0014322</td>
</tr>
<tr class="even">
<td>a_bm_norm[20]</td>
<td align="center">-0.6333188</td>
<td align="left">0.0052434</td>
<td align="center">0.1368810</td>
<td align="center">-0.9181768</td>
<td align="center">-0.7203772</td>
<td align="center">-0.6283925</td>
<td align="center">-0.5403273</td>
<td align="center">-0.3761509</td>
<td align="center">681.4834</td>
<td align="center">1.0003449</td>
</tr>
<tr class="odd">
<td>a_bm_norm[21]</td>
<td align="center">-0.3957515</td>
<td align="left">0.0052231</td>
<td align="center">0.1284832</td>
<td align="center">-0.6575543</td>
<td align="center">-0.4778521</td>
<td align="center">-0.3929083</td>
<td align="center">-0.3111569</td>
<td align="center">-0.1480475</td>
<td align="center">605.1188</td>
<td align="center">1.0012406</td>
</tr>
<tr class="even">
<td>a_bm_norm[22]</td>
<td align="center">-0.0292625</td>
<td align="left">0.0060526</td>
<td align="center">0.1344119</td>
<td align="center">-0.2860116</td>
<td align="center">-0.1204862</td>
<td align="center">-0.0327993</td>
<td align="center">0.0576141</td>
<td align="center">0.2439762</td>
<td align="center">493.1711</td>
<td align="center">1.0033417</td>
</tr>
<tr class="odd">
<td>a_bm_norm[23]</td>
<td align="center">-0.6411656</td>
<td align="left">0.0051955</td>
<td align="center">0.1380644</td>
<td align="center">-0.9247816</td>
<td align="center">-0.7307958</td>
<td align="center">-0.6353042</td>
<td align="center">-0.5463581</td>
<td align="center">-0.3839083</td>
<td align="center">706.1671</td>
<td align="center">1.0002261</td>
</tr>
<tr class="even">
<td>a_bm_norm[24]</td>
<td align="center">0.4336104</td>
<td align="left">0.0081215</td>
<td align="center">0.1702392</td>
<td align="center">0.1342273</td>
<td align="center">0.3126054</td>
<td align="center">0.4207068</td>
<td align="center">0.5429854</td>
<td align="center">0.8043065</td>
<td align="center">439.3813</td>
<td align="center">1.0059156</td>
</tr>
<tr class="odd">
<td>a_bm_norm[25]</td>
<td align="center">-0.8869217</td>
<td align="left">0.0057197</td>
<td align="center">0.1574404</td>
<td align="center">-1.2162575</td>
<td align="center">-0.9882524</td>
<td align="center">-0.8796199</td>
<td align="center">-0.7783999</td>
<td align="center">-0.6002996</td>
<td align="center">757.6807</td>
<td align="center">1.0002479</td>
</tr>
<tr class="even">
<td>a_bm_norm[26]</td>
<td align="center">1.2805502</td>
<td align="left">0.0128771</td>
<td align="center">0.2704397</td>
<td align="center">0.7980406</td>
<td align="center">1.0887761</td>
<td align="center">1.2651200</td>
<td align="center">1.4519296</td>
<td align="center">1.8662452</td>
<td align="center">441.0660</td>
<td align="center">1.0069973</td>
</tr>
<tr class="odd">
<td>a_bm_norm[27]</td>
<td align="center">-0.8046715</td>
<td align="left">0.0054749</td>
<td align="center">0.1504996</td>
<td align="center">-1.1256752</td>
<td align="center">-0.9031270</td>
<td align="center">-0.7973055</td>
<td align="center">-0.7013677</td>
<td align="center">-0.5251334</td>
<td align="center">755.6355</td>
<td align="center">1.0001749</td>
</tr>
<tr class="even">
<td>a_bm_norm[28]</td>
<td align="center">-1.9196463</td>
<td align="left">0.0103139</td>
<td align="center">0.3206570</td>
<td align="center">-2.6137884</td>
<td align="center">-2.1209950</td>
<td align="center">-1.8987504</td>
<td align="center">-1.6968301</td>
<td align="center">-1.3506281</td>
<td align="center">966.5842</td>
<td align="center">1.0008691</td>
</tr>
<tr class="odd">
<td>a_bm_norm[29]</td>
<td align="center">0.0145819</td>
<td align="left">0.0061994</td>
<td align="center">0.1365363</td>
<td align="center">-0.2396681</td>
<td align="center">-0.0764639</td>
<td align="center">0.0072865</td>
<td align="center">0.1033810</td>
<td align="center">0.2964588</td>
<td align="center">485.0618</td>
<td align="center">1.0038566</td>
</tr>
<tr class="even">
<td>a_bm_norm[30]</td>
<td align="center">0.3032353</td>
<td align="left">0.0073839</td>
<td align="center">0.1574109</td>
<td align="center">0.0243495</td>
<td align="center">0.1901417</td>
<td align="center">0.2937836</td>
<td align="center">0.4037032</td>
<td align="center">0.6397283</td>
<td align="center">454.4676</td>
<td align="center">1.0054226</td>
</tr>
<tr class="odd">
<td>s</td>
<td align="center">2.5722159</td>
<td align="left">0.0166277</td>
<td align="center">0.3933513</td>
<td align="center">1.9291118</td>
<td align="center">2.2970962</td>
<td align="center">2.5255790</td>
<td align="center">2.8119336</td>
<td align="center">3.4566604</td>
<td align="center">559.6244</td>
<td align="center">1.0044481</td>
</tr>
<tr class="even">
<td>lp__</td>
<td align="center">-5616.6387287</td>
<td align="left">0.2391257</td>
<td align="center">6.3573450</td>
<td align="center">-5630.2796222</td>
<td align="center">-5620.6002220</td>
<td align="center">-5616.1926901</td>
<td align="center">-5612.2277348</td>
<td align="center">-5605.2607227</td>
<td align="center">706.8042</td>
<td align="center">1.0037792</td>
</tr>
</tbody>
</table>
</div>
<div id="results-and-plots" class="section level2">
<h2><span class="header-section-number">3.4</span> Results and Plots</h2>
<p>First lets get the HPDI of every parameter.</p>
<p>Then we restrict to the algorithms, them to the slopes, then to the</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="probability-of-success-model.html#cb21-1"></a>hpdi &lt;-<span class="st"> </span><span class="kw">get_HPDI_from_stanfit</span>(probsuccess.fit)</span>
<span id="cb21-2"><a href="probability-of-success-model.html#cb21-2"></a>hpdi_oddsratio &lt;-<span class="st"> </span>hpdi</span>
<span id="cb21-3"><a href="probability-of-success-model.html#cb21-3"></a>hpdi_oddsratio<span class="op">$</span>Mean &lt;-<span class="st"> </span><span class="kw">exp</span>(hpdi<span class="op">$</span>Mean)</span>
<span id="cb21-4"><a href="probability-of-success-model.html#cb21-4"></a>hpdi_oddsratio<span class="op">$</span>HPDI.lower &lt;-<span class="st"> </span><span class="kw">exp</span>(hpdi<span class="op">$</span>HPDI.lower)</span>
<span id="cb21-5"><a href="probability-of-success-model.html#cb21-5"></a>hpdi_oddsratio<span class="op">$</span>HPDI.higher &lt;-<span class="st"> </span><span class="kw">exp</span>(hpdi<span class="op">$</span>HPDI.higher)</span>
<span id="cb21-6"><a href="probability-of-success-model.html#cb21-6"></a></span>
<span id="cb21-7"><a href="probability-of-success-model.html#cb21-7"></a></span>
<span id="cb21-8"><a href="probability-of-success-model.html#cb21-8"></a>hpdi_oddsratio_algorithm &lt;-<span class="st"> </span>hpdi_oddsratio <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(<span class="kw">str_detect</span>(Parameter, <span class="st">&quot;a_alg</span><span class="ch">\\</span><span class="st">[&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-9"><a href="probability-of-success-model.html#cb21-9"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">Parameter =</span> algorithms)  <span class="co">#Changing to the algorithms labels</span></span>
<span id="cb21-10"><a href="probability-of-success-model.html#cb21-10"></a></span>
<span id="cb21-11"><a href="probability-of-success-model.html#cb21-11"></a>hpdi_oddsratio_b_noise &lt;-<span class="st"> </span>hpdi_oddsratio <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(<span class="kw">str_detect</span>(Parameter, <span class="st">&quot;b_noise</span><span class="ch">\\</span><span class="st">[&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-12"><a href="probability-of-success-model.html#cb21-12"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">Parameter =</span> algorithms)  <span class="co">#Changing to the algorithms labels</span></span>
<span id="cb21-13"><a href="probability-of-success-model.html#cb21-13"></a></span>
<span id="cb21-14"><a href="probability-of-success-model.html#cb21-14"></a>hpdi_s &lt;-<span class="st"> </span>hpdi <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(Parameter <span class="op">==</span><span class="st"> &quot;s&quot;</span>)</span>
<span id="cb21-15"><a href="probability-of-success-model.html#cb21-15"></a></span>
<span id="cb21-16"><a href="probability-of-success-model.html#cb21-16"></a></span>
<span id="cb21-17"><a href="probability-of-success-model.html#cb21-17"></a>p_alg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> hpdi_oddsratio_algorithm, <span class="kw">aes</span>(<span class="dt">x =</span> Parameter)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_pointrange</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> HPDI.lower, </span>
<span id="cb21-18"><a href="probability-of-success-model.html#cb21-18"></a>    <span class="dt">ymax =</span> HPDI.higher, <span class="dt">y =</span> Mean)) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Algorithm intercept&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Odds ratio&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Algorithm&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb21-19"><a href="probability-of-success-model.html#cb21-19"></a><span class="st">    </span><span class="kw">coord_flip</span>()</span>
<span id="cb21-20"><a href="probability-of-success-model.html#cb21-20"></a>p_alg <span class="op">+</span><span class="st"> </span><span class="kw">plot_annotation</span>(<span class="dt">title =</span> <span class="st">&quot;HPDI interval for the algorithms odd ratio&quot;</span>)</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-20-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="probability-of-success-model.html#cb22-1"></a>p_noise &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> hpdi_oddsratio_b_noise, <span class="kw">aes</span>(<span class="dt">x =</span> Parameter)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_pointrange</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> HPDI.lower, </span>
<span id="cb22-2"><a href="probability-of-success-model.html#cb22-2"></a>    <span class="dt">ymax =</span> HPDI.higher, <span class="dt">y =</span> Mean)) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Noise coefficient&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Odds ratio&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb22-3"><a href="probability-of-success-model.html#cb22-3"></a><span class="st">    </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">axis.text.y =</span> <span class="kw">element_blank</span>())</span>
<span id="cb22-4"><a href="probability-of-success-model.html#cb22-4"></a>p_noise <span class="op">+</span><span class="st"> </span><span class="kw">plot_annotation</span>(<span class="dt">title =</span> <span class="st">&quot;HPDI interval for the noise coefficients odd ratio&quot;</span>)</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-20-2.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="probability-of-success-model.html#cb23-1"></a>p_s &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> hpdi_s, <span class="kw">aes</span>(<span class="dt">x =</span> Parameter)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_pointrange</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> HPDI.lower, <span class="dt">ymax =</span> HPDI.higher, </span>
<span id="cb23-2"><a href="probability-of-success-model.html#cb23-2"></a>    <span class="dt">y =</span> Mean)) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Std benchmarks&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Estimate&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Parameter&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>()</span>
<span id="cb23-3"><a href="probability-of-success-model.html#cb23-3"></a>p_s <span class="op">+</span><span class="st"> </span><span class="kw">plot_annotation</span>(<span class="dt">title =</span> <span class="st">&quot;HPDI interval for s&quot;</span>)</span></code></pre></div>
<p><img src="statscomp-appendix_files/figure-html/unnamed-chunk-20-3.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="relative-improvement.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
